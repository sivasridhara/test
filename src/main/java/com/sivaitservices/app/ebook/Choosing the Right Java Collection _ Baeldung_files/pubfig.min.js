!function(){"use strict";var e={name:"pubfig.js",version:"5.84.9",builds:{analytics:"1.4.2",pbjs:"8.49.5"},description:"Freestar Publisher",main:"src/pubfig.js",engineStrict:!0,engines:{node:">=20"},scripts:{test:"nyc --reporter=text-summary mocha --reporter nyan -r @babel/register -r mock-local-storage -r jsdom-global/register -r mochaGlobalSetup.js test/**/*.spec.js --exit && :","test:html-report":"nyc --reporter=html mocha -r @babel/register -r mock-local-storage -r jsdom-global/register -r mochaGlobalSetup.js test/**/*.spec.js  --exit","test:watch":"mocha --watch -r @babel/register -r mock-local-storage -r jsdom-global/register -r mochaGlobalSetup.js test/**/*.spec.js","readme:coverage":"npm run test && nyc report --reporter=json-summary && node generateCodeCoverageReportImages.mjs",mocha:"env TEST=true mocha",analyze:"webpack --config webpack.analyze.js","dev:rollup":"rollup --config rollup.dev.js --watch",dev:"webpack serve --config webpack.dev.js","dev:https":"webpack serve --config webpack.dev.js --https","build-rollup:production":"rollup -c rollup.prod.js && bin/base64.github.sh prod","build-rollup:pipeline":"rollup -c rollup.pipeline.js","build:github":"webpack --config webpack.prod.js && bin/base64.github.sh prod","build:release":"webpack --config webpack.release.js && bin/base64.github.sh prod","build-rollup:release":"rollup -c rollup.release.js && bin/base64.github.sh prod","build:production":"webpack --config webpack.prod.js && bin/base64.sh prod","publish:production":"bin/publish.sh a.pub.network","publish:staging":"bin/publish.sh",lint:"eslint ./src ./test && prettier --check ./src ./test","lint:fix":"eslint --max-warnings=0 --fix ./src ./test && prettier --write ./src ./test",prepare:"husky install"},"lint-staged":{"*.js":["npm run test","npm run lint:fix"]},repository:{type:"git",url:"https://github.com/freestarcapital/pubfig.js.git"},keywords:["advertising"],author:"Freestar Engineering Group",private:!0,license:"UNLICENSED",devDependencies:{"@babel/core":"^7.12.10","@babel/preset-env":"^7.0.0","@babel/register":"^7.22.15","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-eslint":"^9.0.5","@rollup/plugin-json":"^6.0.1","@rollup/plugin-multi-entry":"^6.0.1","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-replace":"^5.0.5",autoprefixer:"^10.4.16","babel-eslint":"^10.1.0","babel-loader":"^9.1.3",c8:"^8.0.1",chai:"^4.3.4","chai-spies":"^1.0.0","clean-webpack-plugin":"^4.0.0","compression-webpack-plugin":"^10.0.0","core-js":"^3.8.2","css-loader":"^6.8.1","current-git-branch":"^1.1.0",dotenv:"^16.3.1",eslint:"^7.32.0","eslint-config-prettier":"^9.1.0","eslint-loader":"^4.0.2","eslint-webpack-plugin":"^2.4.1","gpt-mock":"^1.0.2",husky:"^8.0.3",jsdom:"^22.1.0","jsdom-global":"^3.0.2","lint-staged":"^15.0.2",lodash:"^4.17.21",mocha:"^10.2.0","mocha-sinon":"^2.1.2","mock-local-storage":"^1.1.17",nyc:"^15.1.0",postcss:"^8.2.2","postcss-loader":"^7.3.3","postcss-preset-env":"^9.2.0",prettier:"^3.1.1",rollup:"^2.79.1","rollup-plugin-gzip":"^3.1.0","rollup-plugin-livereload":"^2.0.5","rollup-plugin-postcss":"^4.0.2","rollup-plugin-replace":"^2.2.0","rollup-plugin-serve":"^2.0.2","rollup-plugin-terser":"^7.0.2",semver:"^7.3.5",sinon:"^16.1.0","sinon-chai":"^3.7.0","string-replace-webpack-plugin":"^0.1.3","style-loader":"^3.3.3",webpack:"^5.88.0","webpack-bundle-analyzer":"^4.3.0","webpack-cli":"^5.1.4","webpack-dev-server":"^4.15.1","webpack-merge":"^5.7.2",yargs:"^17.7.2"},dependencies:{"adblock-detector":"^2.1.0","crypto-js":"^4.1.1",deepmerge:"^4.2.2","fast-copy":"^3.0.1","js-cookie":"^3.0.5","ua-parser-js":"^1.0.36",uuid:"^9.0.1"},browserslist:"last 2 versions"};const t="https://d.pub.network",i=[{siteId:285,restrictedCountries:["IN","VN","NP","DZ","IQ","MA","AF","TR","EG","PK","ID","MA","BD","RS","PH","TN","BG"]}],n=[[468,60],[728,90],[970,90],[970,250],[300,50],[300,100],[320,50],[320,100],[120,600],[160,600],[300,250],[300,600],[336,280],[1,1],[0,0]],s=["AT","BE","BG","HR","CY","CZ","DK","EE","EL","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","GB","NO","IS","LI","CH"],r=["CA","CT","CO","VA","UT"],a={videoAdhesion:{prettyName:"Sticky Footer Video Adhesion",disabled:!1},stickyFooter:{prettyName:"Sticky Footer",disabled:!1,refreshDisabled:!1,refreshInterval:0},video:{prettyName:"Video",disabled:!1,refreshDisabled:!1,refreshInterval:0},standAloneVideo:{prettyName:"Stand Alone Video",disabled:!1,refreshDisabled:!1,refreshInterval:0},revolvingRail:{prettyName:"Revolving Rail",disabled:!1,refreshDisabled:!1,refreshInterval:0},pushdown:{prettyName:"Pushdown",disabled:!1,refreshDisabled:!1,refreshInterval:0},dynamicAds:{prettyName:"Dynamic Ads",disabled:!1,refreshDisabled:!1,refreshInterval:0,optionsPath:"dynamicAdOptions"},dynamicAdsV2:{prettyName:"Dynamic Ads V2",disabled:!1,refreshDisabled:!1,refreshInterval:0,optionsPath:"dynamicAdOptionsV2"},footerBidding:{prettyName:"Footer Bidding",disabled:!1,refreshDisabled:!1,refreshInterval:0},superflex:{prettyName:"Superflex",disabled:!1,refreshDisabled:!1,refreshInterval:0},slidingUnit:{prettyName:"Sliding Unit",disabled:!1,refreshDisabled:!1,refreshInterval:0},sideWall:{prettyName:"Sidewall",disabled:!1,refreshDisabled:!1,refreshInterval:0},pageGrabber:{prettyName:"Page Grabber",disabled:!1,refreshDisabled:!1,refreshInterval:0},interstitial:{prettyName:"Interstitial",disabled:!1,refreshDisabled:!1,refreshInterval:0},googleInterstitial:{prettyName:"Google Interstitial",disabled:!1,refreshDisabled:!1,refreshInterval:0},dianomiContentRec:{prettyName:"Dianomi Content Recommendation",disabled:!1,refreshDisabled:!1,refreshInterval:0},lazyLoad:{prettyName:"Lazy Loaded Ads",disabled:!1,refreshDisabled:!1,refreshInterval:0},iai:{prettyName:"Intelligent Ad Insert",disabled:!1,refreshDisabled:!1,refreshInterval:0}},o=()=>{const e=document.querySelectorAll('script[src*="pubfig.min.js"]'),t=Array.from(e).find((e=>!e.src.includes("/core/")));return t?t.src.split("https://a.pub.network/")[1].split("/")[0]:"freestar-com"},d=`${t}/v2/sites/${o()}/configs?env=ENV`,l="&configId=NUMBER",c="&debug=true",u="&testId=TEST_ID",p="&variantId=VARIANT_ID",f="fs.abtest.group",h="fs.abtest.id",g="fs.abtest.type",m="fs.abtest.variant_type",b="fs.abtest.pubfig_location",w='(window.__gpp_addFrame = function (e) {if (!window.frames[e])if (document.body) {var t = document.createElement("iframe");(t.style.cssText = "display:none"),(t.name = e),document.body.appendChild(t);} else window.setTimeout(window.__gpp_addFrame, 10, e);}),(window.__gpp_stub = function () {var e = arguments;if (((__gpp.queue = __gpp.queue || []),(__gpp.events = __gpp.events || []),!e.length || (1 == e.length && "queue" == e[0])))return __gpp.queue;if (1 == e.length && "events" == e[0]) return __gpp.events;var t = e[0],p = e.length > 1 ? e[1] : null,s = e.length > 2 ? e[2] : null;if ("ping" === t)p({gppVersion: "1.1",cmpStatus: "stub",cmpDisplayStatus: "hidden",signalStatus: "not ready",supportedAPIs: ["2:tcfeuv2","5:tcfcav1","6:uspv1","7:usnatv1","8:uscav1","9:usvav1","10:uscov1","11:usutv1","12:usctv1",],cmpId: 0,sectionList: [],applicableSections: [],gppString: "",parsedSections: {},},!0);else if ("addEventListener" === t) {"lastId" in __gpp || (__gpp.lastId = 0), __gpp.lastId++;var n = __gpp.lastId;__gpp.events.push({ id: n, callback: p, parameter: s }),p({eventName: "listenerRegistered",listenerId: n,data: !0,pingData: {gppVersion: "1.1",cmpStatus: "stub",cmpDisplayStatus: "hidden",signalStatus: "not ready",supportedAPIs: ["2:tcfeuv2","5:tcfcav1","6:uspv1","7:usnatv1","8:uscav1","9:usvav1","10:uscov1","11:usutv1","12:usctv1",],cmpId: 0,sectionList: [],applicableSections: [],gppString: "",parsedSections: {},},},!0);} else if ("removeEventListener" === t) {for (var a = !1, i = 0; i < __gpp.events.length; i++)if (__gpp.events[i].id == s) {__gpp.events.splice(i, 1), (a = !0);break;}p({eventName: "listenerRemoved",listenerId: s,data: a,pingData: {gppVersion: "1.1",cmpStatus: "stub",cmpDisplayStatus: "hidden",signalStatus: "not ready",supportedAPIs: ["2:tcfeuv2","5:tcfcav1","6:uspv1","7:usnatv1","8:uscav1","9:usvav1","10:uscov1","11:usutv1","12:usctv1",],cmpId: 0,sectionList: [],applicableSections: [],gppString: "",parsedSections: {},},},!0);} else"hasSection" === t? p(!1, !0): "getSection" === t || "getField" === t? p(null, !0): __gpp.queue.push([].slice.apply(e));}),(window.__gpp_msghandler = function (e) {var t = "string" == typeof e.data;try {var p = t ? JSON.parse(e.data) : e.data;} catch (e) {p = null;}if ("object" == typeof p && null !== p && "__gppCall" in p) {var s = p.__gppCall;window.__gpp(s.command,function (p, n) {var a = {__gppReturn: { returnValue: p, success: n, callId: s.callId },};e.source.postMessage(t ? JSON.stringify(a) : a, "*");},"parameter" in s ? s.parameter : null,"version" in s ? s.version : "1.1");}}),("__gpp" in window && "function" == typeof window.__gpp) ||((window.__gpp = window.__gpp_stub),window.addEventListener("message", window.__gpp_msghandler, !1),window.__gpp_addFrame("__gppLocator"));',y={pubfigEngineLoadInit:"pubfig-engine-load-init",pubfigEngineSetupStart:"pubfig-engine-setup-start",pubfigEngineLoad:"pubfig-engine-load",pubfigSlotRequested:"pubfig-slotRequested",pubfigStickyFooterSlotRequested:"pubfig-sticky-footer-slotRequested",pubfigSlotRenderEnded:"pubfig-slotRenderEnded",pubfigEngineSetupEnd:"pubfig-engine-setup-end",pubfigStickyFooterSlotRenderEnded:"pubfig-sticky-footer-slotRenderEnded",pubfigPrebidFsRequestBids:"pubfig-prebid-fsRequestBids",pubfigPrebidAuctionInit:"pubfig-prebid-auctionInit",pubfigPrebidAuctionEnd:"pubfig-prebid-auctionEnd",pubfigLoaded:"pubfig-loaded",pubfigInitRequestStart:"pubfig-init-request-start",pubfigInitRequestEnd:"pubfig-init-request-end"};function v(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)e[n]=i[n]}return e}var _=function e(t,i){function n(e,n,s){if("undefined"!=typeof document){"number"==typeof(s=v({},i,s)).expires&&(s.expires=new Date(Date.now()+864e5*s.expires)),s.expires&&(s.expires=s.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var r="";for(var a in s)s[a]&&(r+="; "+a,!0!==s[a]&&(r+="="+s[a].split(";")[0]));return document.cookie=e+"="+t.write(n,e)+r}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var i=document.cookie?document.cookie.split("; "):[],n={},s=0;s<i.length;s++){var r=i[s].split("="),a=r.slice(1).join("=");try{var o=decodeURIComponent(r[0]);if(n[o]=t.read(a,o),e===o)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){n(e,"",v({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,v({},this.attributes,t))},withConverter:function(t){return e(v({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(i)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});const S=e=>new URLSearchParams(window.location?.search).get(e)??"";function I({name:e,value:t,expires:i,path:n,domain:s}){if(!e||!t)return!1;const r={secure:!0};return i&&(r.expires=i),n&&(r.path=n),s&&(r.domain=s),_.set(e,t,r),A({name:e})}function A({name:e}){return _.get(e)}const k=()=>window.location.search.includes("fslog");function T({isActive:e=!1}){window.freestar.debug=!(!e&&!k())&&99}function E(e=window.freestar.locData){return!!e&&("US"===e.iso&&r.includes(e.state))}function x(e=window.freestar.locData){return!!e&&(s.includes(e.iso)||"QC"===e.state)}const C=()=>Boolean(window.__tcfapi);function P(e){const t=x(e),i=E(e),n=(({isGDPRCountry:e,isUspApplicable:t,mspsPrivacyManagerId:i,gdprPrivacyManagerId:n})=>`\nwindow._sp_queue = [];\nwindow._sp_ = {\n    config: {\n        accountId: 1638,\n        baseEndpoint: "https://cdn.privacy-mgmt.com",\n        propertyHref: 'https://${document.location.host}',\n        usnat: {\n            includeUspApi: ${t},\n        },\n\n        ${e?"gdpr: {},":""}\n        events: {\n            onMessageChoiceSelect: function () {\n                console.log("[event] onMessageChoiceSelect", arguments);\n            },\n            onMessageReady: function () {\n                console.log("[event] onMessageReady", arguments);\n            },\n            onMessageChoiceError: function () {\n                console.log("[event] onMessageChoiceError", arguments);\n            },\n            onPrivacyManagerAction: function () {\n                console.log("[event] onPrivacyManagerAction", arguments);\n            },\n            onPMCancel: function () {\n                console.log("[event] onPMCancel", arguments);\n            },\n            onMessageReceiveData: function () {\n                console.log("[event] onMessageReceiveData", arguments);\n            },\n            onSPPMObjectReady: function () {\n                console.log("[event] onSPPMObjectReady", arguments);\n            },\n\n            /* Function required for resurfacing links */\n            onConsentReady: function (message_type, uuid, string, info) {\n                if (message_type == "usnat" && info.applies) {\n                    /* code to insert the GPP footer link */\n                    document.getElementById("pmLink").style.visibility = "visible";\n                    document.getElementById("pmLink").innerHTML =\n                        "Do Not Sell or Share My Personal Information";\n                    document.getElementById("pmLink").onclick = function () {\n                        /* Set GPP ID */\n                        window._sp_.usnat.loadPrivacyManagerModal('${i}');\n                    };\n                }\n                if (message_type == "gdpr" && info.applies) {\n                    /* code to insert the GDPR footer link */\n                    document.getElementById("pmLink").style.visibility = "visible";\n                    document.getElementById("pmLink").innerHTML =\n                        "Privacy Preferences";\n                    document.getElementById("pmLink").onclick = function () {\n                        /* Set GDPR ID */\n                        window._sp_.gdpr.loadPrivacyManagerModal('${n}');\n                    };\n                }\n            },\n            onError: function () {\n                console.log("[event] onError", arguments);\n            },\n        },\n    },\n};`)({isGDPRCountry:t,isUspApplicable:i,mspsPrivacyManagerId:freestar.fsdata.mspsPrivacyManagerId||1035372,gdprPrivacyManagerId:freestar.fsdata.gdprPrivacyManagerId||899033});Jn(null,null,null,n,!1),t&&(Jn(null,null,null,'function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(){var t=function(){var t,e,o=[],n=window,r=n;for(;r;){try{if(r.frames.__tcfapiLocator){t=r;break}}catch(t){}if(r===n.top)break;r=r.parent}t||(!function t(){var e=n.document,o=!!n.frames.__tcfapiLocator;if(!o)if(e.body){var r=e.createElement("iframe");r.style.cssText="display:none",r.name="__tcfapiLocator",e.body.appendChild(r)}else setTimeout(t,5);return!o}(),n.__tcfapi=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return o;"setGdprApplies"===n[0]?n.length>3&&2===parseInt(n[1],10)&&"boolean"==typeof n[3]&&(e=n[3],"function"==typeof n[2]&&n[2]("set",!0)):"ping"===n[0]?"function"==typeof n[2]&&n[2]({gdprApplies:e,cmpLoaded:!1,cmpStatus:"stub"}):o.push(n)},n.addEventListener("message",(function(t){var e="string"==typeof t.data,o={};if(e)try{o=JSON.parse(t.data)}catch(t){}else o=t.data;var n="object"===_typeof(o)&&null!==o?o.__tcfapiCall:null;n&&window.__tcfapi(n.command,n.version,(function(o,r){var a={__tcfapiReturn:{returnValue:o,success:r,callId:n.callId}};t&&t.source&&t.source.postMessage&&t.source.postMessage(e?JSON.stringify(a):a,"*")}),n.parameter)}),!1))};"undefined"!=typeof module?module.exports=t:t()}()',!1),Jn(null,null,null,w,!1)),i&&(Jn(null,null,null,'(function () { var e = false; var c = window; var t = document; function r() { if (!c.frames["__uspapiLocator"]) { if (t.body) { var a = t.body; var e = t.createElement("iframe"); e.style.cssText = "display:none"; e.name = "__uspapiLocator"; a.appendChild(e) } else { setTimeout(r, 5) } } } r(); function p() { var a = arguments; __uspapi.a = __uspapi.a || []; if (!a.length) { return __uspapi.a } else if (a[0] === "ping") { a[2]({ gdprAppliesGlobally: e, cmpLoaded: false }, true) } else { __uspapi.a.push([].slice.apply(a)) } } function l(t) { var r = typeof t.data === "string"; try { var a = r ? JSON.parse(t.data) : t.data; if (a.__cmpCall) { var n = a.__cmpCall; c.__uspapi(n.command, n.parameter, function (a, e) { var c = { __cmpReturn: { returnValue: a, success: e, callId: n.callId } }; t.source.postMessage(r ? JSON.stringify(c) : c, "*") }) } } catch (a) { } } if (typeof __uspapi !== "function") { c.__uspapi = p; __uspapi.msgHandler = l; c.addEventListener("message", l, false) } })();',!1),Jn(null,null,null,w,!1)),Jn("https://cdn.privacy-mgmt.com/unified/wrapperMessagingWithoutDetection.js")}const R=()=>Boolean(window.__uspapi);function B({slotId:e}){function t(){const t=bn({name:e});return t&&t.name?t.name:"unknown"}return e?freestar.dynamicSlotLibrary&&freestar.dynamicSlotLibrary[e]?freestar.dynamicSlotLibrary[e]:(freestar.dynamicSlotLibrary&&freestar.dynamicSlotLibrary[e],t()):"unknown"}function D({path:e}){return e?window.freestar.dynamicPathLibrary.find((t=>t.path===e)):"unknown"}function O({placementName:e,slotId:t,path:i}){t&&function({placementName:e,slotId:t}){e&&t&&(freestar.dynamicSlotLibrary||(freestar.dynamicSlotLibrary={}),freestar.dynamicSlotLibrary[t]=e)}({placementName:e,slotId:t}),i&&function({placementName:e,path:t}){e&&t&&(window.freestar.dynamicPathLibrary||(freestar.dynamicPathLibrary=[]),window.freestar.dynamicPathLibrary.push({placementName:e,path:t}))}({placementName:e,path:i})}function L({slotId:e=null,path:t=null}){return e?B({slotId:e}):!!t&&D({path:t})}const M=function({name:e}){return!(!window.freestar.config.products[e]||!window.freestar.config.products[e].disabled)&&(window.freestar.log(1,`${a[e].prettyName} Disabled via freestar.config.products.${e}.disabled`),!0)};let q=S("fsdebug"),N=[];q&&"true"!==q&&!Number.isInteger(+q)&&(N=q.split(",").map((e=>e.toUpperCase())));const j=(e,...t)=>{let i="Pubfig",n="background: #00C389; color: #fff; border-radius: 3px; padding: 3px";"object"==typeof e&&(i=e.title?e.title:i,n=e.styles?e.styles:n,e=void 0!==e.level?e.level:1),S("fs-log-filter")&&i!==S("fs-log-filter")||(freestar.debug>=e&&0===N.length||N.includes(i.toUpperCase()))&&console.info(`%c${i}: `,n,...t)},$={title:"Pubfig"};class U{constructor(){this.logs=[]}add(e){this.logs.push(e)}show(e=$){if(!freestar.log)return;if(0===this.logs.length)return;let t=this.logs;this.logs=[],freestar.log(e,`\n${t.join("\n")}`)}}var z=Function.prototype.toString,F=Object.create,V=Object.prototype.toString,G=function(){function e(){this._keys=[],this._values=[]}return e.prototype.has=function(e){return!!~this._keys.indexOf(e)},e.prototype.get=function(e){return this._values[this._keys.indexOf(e)]},e.prototype.set=function(e,t){this._keys.push(e),this._values.push(t)},e}();var H="undefined"!=typeof WeakMap?function(){return new WeakMap}:function(){return new G};function W(e){if(!e)return F(null);var t=e.constructor;if(t===Object)return e===Object.prototype?{}:F(e);if(~z.call(t).indexOf("[native code]"))try{return new t}catch(e){}return F(e)}var J="g"===/test/g.flags?function(e){return e.flags}:function(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t};function K(e){var t=V.call(e);return t.substring(8,t.length-1)}var Q="undefined"!=typeof Symbol?function(e){return e[Symbol.toStringTag]||K(e)}:K,Y=Object.defineProperty,Z=Object.getOwnPropertyDescriptor,X=Object.getOwnPropertyNames,ee=Object.getOwnPropertySymbols,te=Object.prototype,ie=te.hasOwnProperty,ne=te.propertyIsEnumerable,se="function"==typeof ee;var re=se?function(e){return X(e).concat(ee(e))}:X;function ae(e,t,i){for(var n=re(e),s=0,r=n.length,a=void 0,o=void 0;s<r;++s)if("callee"!==(a=n[s])&&"caller"!==a)if(o=Z(e,a)){o.get||o.set||(o.value=i.copier(o.value,i));try{Y(t,a,o)}catch(e){t[a]=o.value}}else t[a]=i.copier(e[a],i);return t}function oe(e,t){return e.slice(0)}function de(e,t){var i=new t.Constructor;return t.cache.set(e,i),e.forEach((function(e,n){i.set(n,t.copier(e,t))})),i}var le=se?function(e,t){var i=W(t.prototype);for(var n in t.cache.set(e,i),e)ie.call(e,n)&&(i[n]=t.copier(e[n],t));for(var s=ee(e),r=0,a=s.length,o=void 0;r<a;++r)o=s[r],ne.call(e,o)&&(i[o]=t.copier(e[o],t));return i}:function(e,t){var i=W(t.prototype);for(var n in t.cache.set(e,i),e)ie.call(e,n)&&(i[n]=t.copier(e[n],t));return i};function ce(e,t){return new t.Constructor(e.valueOf())}function ue(e,t){return e}function pe(e,t){var i=new t.Constructor;return t.cache.set(e,i),e.forEach((function(e){i.add(t.copier(e,t))})),i}var fe=Array.isArray,he=Object.assign,ge=Object.getPrototypeOf||function(e){return e.__proto__},me={array:function(e,t){var i=new t.Constructor;t.cache.set(e,i);for(var n=0,s=e.length;n<s;++n)i[n]=t.copier(e[n],t);return i},arrayBuffer:oe,blob:function(e,t){return e.slice(0,e.size,e.type)},dataView:function(e,t){return new t.Constructor(oe(e.buffer))},date:function(e,t){return new t.Constructor(e.getTime())},error:ue,map:de,object:le,regExp:function(e,t){var i=new t.Constructor(e.source,J(e));return i.lastIndex=e.lastIndex,i},set:pe},be=he({},me,{array:function(e,t){var i=new t.Constructor;return t.cache.set(e,i),ae(e,i,t)},map:function(e,t){return ae(e,de(e,t),t)},object:function(e,t){var i=W(t.prototype);return t.cache.set(e,i),ae(e,i,t)},set:function(e,t){return ae(e,pe(e,t),t)}});function we(e){var t=function(e){return{Arguments:e.object,Array:e.array,ArrayBuffer:e.arrayBuffer,Blob:e.blob,Boolean:ce,DataView:e.dataView,Date:e.date,Error:e.error,Float32Array:e.arrayBuffer,Float64Array:e.arrayBuffer,Int8Array:e.arrayBuffer,Int16Array:e.arrayBuffer,Int32Array:e.arrayBuffer,Map:e.map,Number:ce,Object:e.object,Promise:ue,RegExp:e.regExp,Set:e.set,String:ce,WeakMap:ue,WeakSet:ue,Uint8Array:e.arrayBuffer,Uint8ClampedArray:e.arrayBuffer,Uint16Array:e.arrayBuffer,Uint32Array:e.arrayBuffer,Uint64Array:e.arrayBuffer}}(he({},me,e)),i=t.Array,n=t.Object;function s(e,s){if(s.prototype=s.Constructor=void 0,!e||"object"!=typeof e)return e;if(s.cache.has(e))return s.cache.get(e);if(s.prototype=ge(e),s.Constructor=s.prototype&&s.prototype.constructor,!s.Constructor||s.Constructor===Object)return n(e,s);if(fe(e))return i(e,s);var r=t[Q(e)];return r?r(e,s):"function"==typeof e.then?e:n(e,s)}return function(e){return s(e,{Constructor:void 0,cache:H(),copier:s,prototype:void 0})}}we(he({},be,{}));var ye=we({});const ve=["click","scroll"],_e={},Se=()=>void 0!==window.freestar.config.pageSpeedOptimized?window.freestar.config.pageSpeedOptimized:window.freestar.fsdata.pageSpeedOptimized,Ie=()=>{ve.forEach((e=>document.removeEventListener(e,Ie)))},Ae=({name:e,callback:t})=>{_e[e].waiting&&!_e[e].called&&(_e[e].called=!0,Ie(),t())},ke=({name:e,callback:t})=>{Object.prototype.hasOwnProperty.call(_e,e)||(_e[e]={waiting:!0},ve.forEach((i=>document.addEventListener(i,Ae.bind(null,{name:e,callback:t}),{once:!0}))))};var Te="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Ee(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function xe(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var i=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(i,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})})),i}var Ce=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===Pe}(e)}(e)};var Pe="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function Re(e,t){return!1!==t.clone&&t.isMergeableObject(e)?Me((i=e,Array.isArray(i)?[]:{}),e,t):e;var i}function Be(e,t,i){return e.concat(t).map((function(e){return Re(e,i)}))}function De(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return Object.propertyIsEnumerable.call(e,t)})):[]}(e))}function Oe(e,t){try{return t in e}catch(e){return!1}}function Le(e,t,i){var n={};return i.isMergeableObject(e)&&De(e).forEach((function(t){n[t]=Re(e[t],i)})),De(t).forEach((function(s){(function(e,t){return Oe(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,s)||(Oe(e,s)&&i.isMergeableObject(t[s])?n[s]=function(e,t){if(!t.customMerge)return Me;var i=t.customMerge(e);return"function"==typeof i?i:Me}(s,i)(e[s],t[s],i):n[s]=Re(t[s],i))})),n}function Me(e,t,i){(i=i||{}).arrayMerge=i.arrayMerge||Be,i.isMergeableObject=i.isMergeableObject||Ce,i.cloneUnlessOtherwiseSpecified=Re;var n=Array.isArray(t);return n===Array.isArray(e)?n?i.arrayMerge(e,t,i):Le(e,t,i):Re(t,i)}Me.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,i){return Me(e,i,t)}),{})};var qe=Ee(Me);class Ne{constructor(e){this.adSlotId=e.getSlotElementId(),this.size=e.getSizes().map((e=>"fluid"===e?[1,1]:[e.getWidth(),e.getHeight()])),this.adUnitPath=e.getAdUnitPath()}}function je({slotArray:e}){window.__iasPET.queue=window.__iasPET.queue||[],window.__iasPET.queue.push({adSlots:e,dataHandler:function(){window.__iasPET.setTargetingForGPT()}})}function $e({slot:e=null}){void 0!==window.__iasPET&&(freestar.log(1,"Publisher SlotOperations IAS: iasPETTargeting found"),e?je({slotArray:[new Ne(e)]}):function(){const e=[];vi().forEach((t=>e.push(new Ne(t)))),e.length&&je({slotArray:e})}())}function Ue({slot:e=null}){$e({slot:e}),function({slot:e=null}){window.moatPrebidApi&&("function"==typeof window.moatPrebidApi.slotDataAvailable&&window.moatPrebidApi.slotDataAvailable()||"function"==typeof window.moatPrebidApi.pageDataAvailable&&window.moatPrebidApi.pageDataAvailable())&&(freestar.log(1,"Publisher SlotOperations Moat: moatSlotTargetingReady"),e?window.top.moatPrebidApi.setMoatTargetingForSlot(e):window.moatPrebidApi.setMoatTargetingForAllSlots())}({slot:e})}const ze={string:{type:"string",default:""},array:{type:"array",default:[]},object:{type:"object",default:{}},number:{type:"number",default:void 0}};function Fe({key:e,type:t=ze.string.type}){const i=sessionStorage.getItem(e);if(t===ze.object.type){if(i){const e=JSON.parse(i);if(e instanceof Object)return e}return ze.object.default}if(t===ze.array.type){if(i){const e=JSON.parse(i);if(Array.isArray(e))return e}return ze.array.default}if(t===ze.number.type){const e=Number(i);return Number.isInteger(e)?e:ze.number.default}return i}function Ve({key:e,type:t=ze.string,value:i}){i&&(t!==ze.object&&t!==ze.array||(i=JSON.stringify(i)),sessionStorage.setItem(e,i))}function Ge({key:e}){const t=Fe({key:e,type:ze.object.type});if(t){const{value:i,expiry:n}=t;if(n&&!(n<Date.now()))return i;!function({key:e}){sessionStorage.removeItem(e)}({key:e})}return null}function He({key:e,value:t}){!function({key:e,value:t,expiry:i}){Ve({key:e,type:ze.object,value:{value:t,expiry:i}})}({key:e,value:t,expiry:Date.now()+36e5})}const We=new class{value;async init(){"cookieDeprecationLabel"in navigator&&"function"==typeof navigator.cookieDeprecationLabel.getValue&&(this.value=await navigator.cookieDeprecationLabel.getValue())}},Je="fs.session";const Ke=new class{constructor(){this.cdep=!!We.value;const e=JSON.parse(Fe({key:Je}));this.known=Number(e?.known??0)}_update(e){this.known=e;const t=JSON.parse(Fe({key:Je}));if(t?.known!==this.known){const e=Object.assign({},t,{known:this.known});Ve({key:Je,type:ze.object,value:e})}}get isKnownByPrebidUser(){return!(!window.fsprebid?.getUserIds||!Object.keys(window.fsprebid.getUserIds()).length)}get isCDEPUser(){return this.cdep}get _isKnown(){return Number(!this.isCDEPUser&&this.isKnownByPrebidUser)}get isKnown(){return this._update(this._isKnown),this.known}};class Qe{static createInstance({ClassConstructor:e,instanceName:t,params:i=[]}){if(window.freestar=window.freestar||{},window.freestar.instances=window.freestar.instances||{},window.freestar.instances[t])return window.freestar.instances[t];const n=new e(...i);return window.freestar.instances[t]=n,n}static getInstanceFn({ClassConstructor:e,instanceName:t,params:i=[]}){return()=>this.createInstance({ClassConstructor:e,instanceName:t,params:i})}}const Ye=Qe.getInstanceFn({ClassConstructor:class{constructor(){this.results={},this.ongoingRequests=new Map}clearClassCachedData({requestId:e}){Object.prototype.hasOwnProperty.call(this.results,e)&&delete this.results[e]}async fetch({fetchFn:e,requestId:t,onError:i,onSuccess:n}){if(this.results[t])return this.results[t];if(!this.ongoingRequests.has(t)){const s=e().then((e=>{const i={data:e,error:null};return this.results[t]=i,n&&n(e),i}),(e=>{const n={data:null,error:e};return this.results[t]=n,i&&i(e),n}));this.ongoingRequests.set(t,s)}return this.ongoingRequests.get(t).finally((()=>{this.ongoingRequests.delete(t)}))}get({requestId:e}){return this.results[e]}},instanceName:"requestHandler"});var Ze,Xe,et={exports:{}};Ze=et,Xe=et.exports,function(e,t){var i="function",n="undefined",s="object",r="string",a="major",o="model",d="name",l="type",c="vendor",u="version",p="architecture",f="console",h="mobile",g="tablet",m="smarttv",b="wearable",w="embedded",y="Amazon",v="Apple",_="ASUS",S="BlackBerry",I="Browser",A="Chrome",k="Firefox",T="Google",E="Huawei",x="LG",C="Microsoft",P="Motorola",R="Opera",B="Samsung",D="Sharp",O="Sony",L="Xiaomi",M="Zebra",q="Facebook",N="Chromium OS",j="Mac OS",$=function(e){for(var t={},i=0;i<e.length;i++)t[e[i].toUpperCase()]=e[i];return t},U=function(e,t){return typeof e===r&&-1!==z(t).indexOf(z(e))},z=function(e){return e.toLowerCase()},F=function(e,t){if(typeof e===r)return e=e.replace(/^\s\s*/,""),typeof t===n?e:e.substring(0,350)},V=function(e,n){for(var r,a,o,d,l,c,u=0;u<n.length&&!l;){var p=n[u],f=n[u+1];for(r=a=0;r<p.length&&!l&&p[r];)if(l=p[r++].exec(e))for(o=0;o<f.length;o++)c=l[++a],typeof(d=f[o])===s&&d.length>0?2===d.length?typeof d[1]==i?this[d[0]]=d[1].call(this,c):this[d[0]]=d[1]:3===d.length?typeof d[1]!==i||d[1].exec&&d[1].test?this[d[0]]=c?c.replace(d[1],d[2]):t:this[d[0]]=c?d[1].call(this,c,d[2]):t:4===d.length&&(this[d[0]]=c?d[3].call(this,c.replace(d[1],d[2])):t):this[d]=c||t;u+=2}},G=function(e,i){for(var n in i)if(typeof i[n]===s&&i[n].length>0){for(var r=0;r<i[n].length;r++)if(U(i[n][r],e))return"?"===n?t:n}else if(U(i[n],e))return"?"===n?t:n;return e},H={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},W={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[u,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[u,[d,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[d,u],[/opios[\/ ]+([\w\.]+)/i],[u,[d,R+" Mini"]],[/\bopr\/([\w\.]+)/i],[u,[d,R]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[d,u],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[u,[d,"UC"+I]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[u,[d,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[u,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[u,[d,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[u,[d,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[u,[d,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure "+I],u],[/\bfocus\/([\w\.]+)/i],[u,[d,k+" Focus"]],[/\bopt\/([\w\.]+)/i],[u,[d,R+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[u,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[u,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[u,[d,R+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[u,[d,"MIUI "+I]],[/fxios\/([-\w\.]+)/i],[u,[d,k]],[/\bqihu|(qi?ho?o?|360)browser/i],[[d,"360 "+I]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1 "+I],u],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],u],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[d,u],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[d],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[d,q],u],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[d,u],[/\bgsa\/([\w\.]+) .*safari\//i],[u,[d,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[u,[d,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[u,[d,A+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[d,A+" WebView"],u],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[u,[d,"Android "+I]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[d,u],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[u,[d,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[u,d],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[d,[u,G,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[d,u],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[d,"Netscape"],u],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[u,[d,k+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[d,u],[/(cobalt)\/([\w\.]+)/i],[d,[u,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[p,"amd64"]],[/(ia32(?=;))/i],[[p,z]],[/((?:i[346]|x)86)[;\)]/i],[[p,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[p,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[p,"armhf"]],[/windows (ce|mobile); ppc;/i],[[p,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[p,/ower/,"",z]],[/(sun4\w)[;\)]/i],[[p,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[p,z]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[o,[c,B],[l,g]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[o,[c,B],[l,h]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[o,[c,v],[l,h]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[o,[c,v],[l,g]],[/(macintosh);/i],[o,[c,v]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[o,[c,D],[l,h]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[o,[c,E],[l,g]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[o,[c,E],[l,h]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[o,/_/g," "],[c,L],[l,h]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[o,/_/g," "],[c,L],[l,g]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[o,[c,"OPPO"],[l,h]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[o,[c,"Vivo"],[l,h]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[o,[c,"Realme"],[l,h]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[o,[c,P],[l,h]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[o,[c,P],[l,g]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[o,[c,x],[l,g]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[o,[c,x],[l,h]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[o,[c,"Lenovo"],[l,g]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[o,/_/g," "],[c,"Nokia"],[l,h]],[/(pixel c)\b/i],[o,[c,T],[l,g]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[o,[c,T],[l,h]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[o,[c,O],[l,h]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[o,"Xperia Tablet"],[c,O],[l,g]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[o,[c,"OnePlus"],[l,h]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[o,[c,y],[l,g]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[o,/(.+)/g,"Fire Phone $1"],[c,y],[l,h]],[/(playbook);[-\w\),; ]+(rim)/i],[o,c,[l,g]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[o,[c,S],[l,h]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[o,[c,_],[l,g]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[o,[c,_],[l,h]],[/(nexus 9)/i],[o,[c,"HTC"],[l,g]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[c,[o,/_/g," "],[l,h]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[o,[c,"Acer"],[l,g]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[o,[c,"Meizu"],[l,h]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[c,o,[l,h]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[c,o,[l,g]],[/(surface duo)/i],[o,[c,C],[l,g]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[o,[c,"Fairphone"],[l,h]],[/(u304aa)/i],[o,[c,"AT&T"],[l,h]],[/\bsie-(\w*)/i],[o,[c,"Siemens"],[l,h]],[/\b(rct\w+) b/i],[o,[c,"RCA"],[l,g]],[/\b(venue[\d ]{2,7}) b/i],[o,[c,"Dell"],[l,g]],[/\b(q(?:mv|ta)\w+) b/i],[o,[c,"Verizon"],[l,g]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[o,[c,"Barnes & Noble"],[l,g]],[/\b(tm\d{3}\w+) b/i],[o,[c,"NuVision"],[l,g]],[/\b(k88) b/i],[o,[c,"ZTE"],[l,g]],[/\b(nx\d{3}j) b/i],[o,[c,"ZTE"],[l,h]],[/\b(gen\d{3}) b.+49h/i],[o,[c,"Swiss"],[l,h]],[/\b(zur\d{3}) b/i],[o,[c,"Swiss"],[l,g]],[/\b((zeki)?tb.*\b) b/i],[o,[c,"Zeki"],[l,g]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[c,"Dragon Touch"],o,[l,g]],[/\b(ns-?\w{0,9}) b/i],[o,[c,"Insignia"],[l,g]],[/\b((nxa|next)-?\w{0,9}) b/i],[o,[c,"NextBook"],[l,g]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[c,"Voice"],o,[l,h]],[/\b(lvtel\-)?(v1[12]) b/i],[[c,"LvTel"],o,[l,h]],[/\b(ph-1) /i],[o,[c,"Essential"],[l,h]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[o,[c,"Envizen"],[l,g]],[/\b(trio[-\w\. ]+) b/i],[o,[c,"MachSpeed"],[l,g]],[/\btu_(1491) b/i],[o,[c,"Rotor"],[l,g]],[/(shield[\w ]+) b/i],[o,[c,"Nvidia"],[l,g]],[/(sprint) (\w+)/i],[c,o,[l,h]],[/(kin\.[onetw]{3})/i],[[o,/\./g," "],[c,C],[l,h]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[o,[c,M],[l,g]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[o,[c,M],[l,h]],[/smart-tv.+(samsung)/i],[c,[l,m]],[/hbbtv.+maple;(\d+)/i],[[o,/^/,"SmartTV"],[c,B],[l,m]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[c,x],[l,m]],[/(apple) ?tv/i],[c,[o,v+" TV"],[l,m]],[/crkey/i],[[o,A+"cast"],[c,T],[l,m]],[/droid.+aft(\w+)( bui|\))/i],[o,[c,y],[l,m]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[o,[c,D],[l,m]],[/(bravia[\w ]+)( bui|\))/i],[o,[c,O],[l,m]],[/(mitv-\w{5}) bui/i],[o,[c,L],[l,m]],[/Hbbtv.*(technisat) (.*);/i],[c,o,[l,m]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[c,F],[o,F],[l,m]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[l,m]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[c,o,[l,f]],[/droid.+; (shield) bui/i],[o,[c,"Nvidia"],[l,f]],[/(playstation [345portablevi]+)/i],[o,[c,O],[l,f]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[o,[c,C],[l,f]],[/((pebble))app/i],[c,o,[l,b]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[o,[c,v],[l,b]],[/droid.+; (glass) \d/i],[o,[c,T],[l,b]],[/droid.+; (wt63?0{2,3})\)/i],[o,[c,M],[l,b]],[/(quest( 2| pro)?)/i],[o,[c,q],[l,b]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[c,[l,w]],[/(aeobc)\b/i],[o,[c,y],[l,w]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[o,[l,h]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[o,[l,g]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[l,g]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[l,h]],[/(android[-\w\. ]{0,9});.+buil/i],[o,[c,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[u,[d,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[u,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[d,u],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[u,d]],os:[[/microsoft (windows) (vista|xp)/i],[d,u],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[d,[u,G,H]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[d,"Windows"],[u,G,H]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[u,/_/g,"."],[d,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[d,j],[u,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[u,d],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[d,u],[/\(bb(10);/i],[u,[d,S]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[u,[d,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[u,[d,k+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[u,[d,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[u,[d,"watchOS"]],[/crkey\/([\d\.]+)/i],[u,[d,A+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[d,N],u],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[d,u],[/(sunos) ?([\w\.\d]*)/i],[[d,"Solaris"],u],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[d,u]]},J=function(f,m){if(typeof f===s&&(m=f,f=t),!(this instanceof J))return new J(f,m).getResult();var b=typeof e!==n&&e.navigator?e.navigator:t,w=f||(b&&b.userAgent?b.userAgent:""),y=b&&b.userAgentData?b.userAgentData:t,v=m?function(e,t){var i={};for(var n in e)t[n]&&t[n].length%2==0?i[n]=t[n].concat(e[n]):i[n]=e[n];return i}(W,m):W,_=b&&b.userAgent==w;return this.getBrowser=function(){var e={};return e[d]=t,e[u]=t,V.call(e,w,v.browser),e[a]=function(e){return typeof e===r?e.replace(/[^\d\.]/g,"").split(".")[0]:t}(e[u]),_&&b&&b.brave&&typeof b.brave.isBrave==i&&(e[d]="Brave"),e},this.getCPU=function(){var e={};return e[p]=t,V.call(e,w,v.cpu),e},this.getDevice=function(){var e={};return e[c]=t,e[o]=t,e[l]=t,V.call(e,w,v.device),_&&!e[l]&&y&&y.mobile&&(e[l]=h),_&&"Macintosh"==e[o]&&b&&typeof b.standalone!==n&&b.maxTouchPoints&&b.maxTouchPoints>2&&(e[o]="iPad",e[l]=g),e},this.getEngine=function(){var e={};return e[d]=t,e[u]=t,V.call(e,w,v.engine),e},this.getOS=function(){var e={};return e[d]=t,e[u]=t,V.call(e,w,v.os),_&&!e[d]&&y&&"Unknown"!=y.platform&&(e[d]=y.platform.replace(/chrome os/i,N).replace(/macos/i,j)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return w},this.setUA=function(e){return w=typeof e===r&&e.length>350?F(e,350):e,this},this.setUA(w),this};J.VERSION="1.0.36",J.BROWSER=$([d,u,a]),J.CPU=$([p]),J.DEVICE=$([o,c,l,f,h,m,g,b,w]),J.ENGINE=J.OS=$([d,u]),Ze.exports&&(Xe=Ze.exports=J),Xe.UAParser=J;var K=typeof e!==n&&(e.jQuery||e.Zepto);if(K&&!K.ua){var Q=new J;K.ua=Q.getResult(),K.ua.get=function(){return Q.getUA()},K.ua.set=function(e){Q.setUA(e);var t=Q.getResult();for(var i in t)K.ua[i]=t[i]}}}("object"==typeof window?window:Te);var tt=et.exports;const it=new class{constructor(){this.initManager()}initManager(){window.freestar=window.freestar||{},this._setDeviceType()}_setDeviceType(){window.freestar.deviceInfo=tt.UAParser(),window.freestar.deviceInfo.device.type||(window.freestar.deviceInfo.device={type:"desktop"})}getFormattedDeviceType(){if(window.freestar)return"Apple"===window.freestar.deviceInfo.device.vendor?"smartphone-ios":window.freestar.deviceInfo.device.type}},nt="4e799501-b8b6-4ef1-bad5-225b3dd1aa8d",st="https://api.floors.dev/sgw/v1/floors",rt="fs.idealadstack.config",at="session storage",ot="network request",dt=Object.freeze({CLIENT:"client",SERVER:"server"});function lt(){return window.freestar.fsdata.domain||location.host}const ct=async()=>{const e=window.freestar?.fsdata?.isTriple13Enabled,t=freestar.locData?freestar.locData.iso:"";let i=await fetch(`https://optimise.net/?k=${Ke.isKnown}&d=${lt()}&t=${it.getFormattedDeviceType()}&c=${t}${S("fsiasdebug")?"&g=experiment":""}&r=1`,{method:"GET",credentials:"include",...e&&{headers:{"x-api-key":nt}}});const n=i.headers;i=await i.text(),i=JSON.parse(i);const{testGroup:s,knownUser:r}=i;return{data:{testGroup:s,knownUser:r,roundTripTime:n.get("fs-client-rtt"),...i.config},source:ot}},ut=async()=>{let e;const t=Ge({key:rt});return e=t?{data:t,source:at}:await ct(),e},pt={title:"IDEAL AD STACK v3.0"};window.freestar=window.freestar||{};const ft=Qe.getInstanceFn({ClassConstructor:class{constructor(){this.active=!0,this.config=null,this.configByRtt=null,this.refreshCallback=this.refreshData.bind(this),this.refreshingInProgress=!0,this.logs=new U,this.init(),this.setupBypassFirstAuction(),this.asyncInit(),this.bidderSummary=null,this.debugOrTestSession=null,this.alwaysBypassFirstAuction=null}init(){let e,t,i;const n=Ye().get({requestId:"getIdealData"});if(n)({config:e,source:t,errors:i}=this.parseRequestHandlerResult(n));else{const n=Ge({key:rt});n?(e=n,i=[],t=at):(e={},i=["data not yet available"],t=ot)}this.logs.add(`Got config from ${t}`),i.length>0&&(this.sendErrorMessage(i),this.logs.add("Config invalid!",JSON.stringify(e))),this.setConfig(e),this.setKVPs(),this.logs.show(pt)}setConfig(e){this.config=e,this.setConfigByRtt()}sendErrorMessage(e){window.freestar.msg.que.push({eventType:"customEvent",args:{eventName:"DYNAMIC_AUCTION_TIMEOUT_TEST",eventType:"ERRORS",jsonValue:JSON.stringify({errors:e.join(", ")})}})}async asyncInit(){const e=await Ye().fetch({requestId:"getIdealData",fetchFn:ut}),{config:t,source:i,errors:n}=this.parseRequestHandlerResult(e);i===ot&&0===n.length&&He({key:rt,value:t}),t.knownUser||this.bindEvents(),this.refreshingInProgress=!1}async refreshData(){if(this.refreshingInProgress)return;this.refreshingInProgress=!0;const e=await Ye().fetch({requestId:"getIdealData",fetchFn:ut});if(!this.parseRequestHandlerResult(e).config.knownUser&&Ke.isKnown){Ye().clearClassCachedData({requestId:"getIdealData"});const e=await Ye().fetch({requestId:"getIdealData",fetchFn:ct}),{config:t,source:i,errors:n}=this.parseRequestHandlerResult(e);i===ot&&0===n.length&&(He({key:rt,value:t}),window.freestar.queue.push((()=>{window.fsprebid.offEvent("auctionEnd",this.refreshCallback)})))}this.refreshingInProgress=!1}bindEvents(){window.freestar&&window.freestar.queue&&window.freestar.queue.push((()=>{window.fsprebid.onEvent("auctionEnd",this.refreshCallback)}))}parseRequestHandlerResult(e){let t,i,n;const{data:s,error:r}=e;return r?(t={},n=[r.toString()]):(({data:t,source:i}=s),n=i===ot?this.getErrors(t):[]),{config:t,source:i,errors:n}}getConfigByRtt(){return this.configByRtt}setConfigByRtt(){let e,t;if(null!=this.config.roundTripTime&&(t=Number(this.config.roundTripTime),!Number.isNaN(t)&&this.config.clientServerRTT))for(const i of this.config.clientServerRTT)t<i.lessThan&&(null==e||e.lessThan>i.lessThan)&&(e=i);this.configByRtt=(e||this).config}getConfig({refresh:e=0}){let t;if(null!=this.config.roundTripTime){const e=Number(this.config.roundTripTime);Number.isNaN(e)||(t=e)}const i=this._getConfig({rtt:t,refresh:e});return{...i,clientServer:this.applyTestSessionOverride(i?.clientServer)}}_getConfig({rtt:e,refresh:t}){const i=this._getConfigByRttAndRefresh({rtt:e,refresh:t});if(i)return i.config;const n=this._getConfigByRtt({rtt:e});return n?n.config:this.config}_getConfigByRttAndRefresh({rtt:e,refresh:t}){if(null!=e&&null!=t&&this.config.clientServerRefresh){const i=ht(t,this.config.clientServerRefresh);if(i&&i.clientServerRTT)return ht(e,i.clientServerRTT)}}_getConfigByRtt({rtt:e}){if(null!=e&&this.config.clientServerRTT)return ht(e,this.config.clientServerRTT)}applyTestSessionOverride(e){if(!this.isDebugOrTestSession())return e;const t={...e};return Object.keys(t).forEach((e=>{const i=window?.freestar?.fsdata?.networks?.find((t=>t.slug===e))||null;if(i){"off"!==t[e]&&(i.isClient?t[e]=dt.CLIENT:i.isPrebidServer&&(t[e]=dt.SERVER))}})),t}adjustClientServer(){let{clientServer:e={}}=this.getConfigByRtt();return this.applyTestSessionOverride(e)}getActiveClientBidders(){return this.getBiddersByType(dt.CLIENT)}getActiveServerBidders(){return this.getBiddersByType(dt.SERVER)}getActiveBidders(){return[...this.getActiveClientBidders()].concat(this.getActiveServerBidders())}getInactiveBidders(){if(!this.active)return[];let{clientServer:e={}}=this.getConfigByRtt();return Object.keys(e).filter((t=>"off"===e[t]))}getAllBidders(){let{clientServer:e={}}=this.config;return Object.keys(e)}getServerToServerDetails(){if(!this.active)return{};let{testGroup:e}=this.config,{clientServerMask:t}=this.getConfigByRtt();return{clientServerMask:t,testGroup:e}}getDynamicAuctionTimeoutDetails(){const{maxTimeout:e=window.freestar.fsdata.timeout,roundTripTime:t=null}=this.config;return{maxTimeout:e,roundTripTime:t}}getMaxAuctionTimeout(){const{maxTimeout:e}=this.getDynamicAuctionTimeoutDetails();return e}setKVPs(){const{roundTripTime:e=null}=this.getDynamicAuctionTimeoutDetails(),{clientServerMask:t=null,testGroup:i=null}=this.getServerToServerDetails();freestar.queue.push((()=>{googletag.pubads().setTargeting("floors_user",String(Ke.isKnown)),e&&googletag.pubads().setTargeting("floors_rtt",`${e}`),this.isDebugOrTestSession()||i&&googletag.pubads().setTargeting("fs_testgroup",`${i}`)})),this.logs.add(`fs_clientservermask: ${t}\nfs_testgroup: ${i}\nfloors_user: ${Ke.isKnown}\nfloors_rtt: ${e}`)}getErrors(e){const t=[];return 0===Object.keys(e).length?t.push("no params"):void 0===e.maxTimeout&&t.push("no maxTimeout"),t}async getFloorsData(){const e=await Ye().fetch({requestId:"getIdealData",fetchFn:ut}),{config:t}=this.parseRequestHandlerResult(e);return t&&t.floors}getBypassFirstAuction(){if(null===this.alwaysBypassFirstAuction){const e=this.getAllPossibleConfigs();this.alwaysBypassFirstAuction=e.length>0&&e.every((e=>"off"===e.preGAMAuction))}return this.alwaysBypassFirstAuction}async setupBypassFirstAuction(){this.getBypassFirstAuction()&&fsprebid&&fsprebid.que&&fsprebid.que.push((function(){fsprebid.removeAdUnit()}))}getFeatureConfig(){return this.config&&this.config.features||{}}allowBrowsi(){return"off"!==this.getFeatureConfig().browsi}allowConfiant(){return"off"!==this.getFeatureConfig().confiant}allowBlockthrough(){return"off"!==this.getFeatureConfig().blockthrough}allowRebid(){return"off"!==this.getFeatureConfig().rebid}isGAMEnabled(){return"off"!==this.getFeatureConfig().gam}isS2SDisabled(){return!Object.values(this.getBidderSummary()).some((e=>"client"!==e))}allowRefresh(){return"off"!==this.getFeatureConfig().refresh}determineAdRefreshBehavior(){const e=!this.isGAMEnabled()&&this.isS2SDisabled(),t=this.allowRefresh();return{isRefreshAllowed:e||t,refreshVersion:window.freestar.fsdata.refreshVersion&&2===window.freestar.fsdata.refreshVersion?"v2":"v1"}}checkBidders(){const e=this.getInactiveBidders(),t=[...new Set(window.freestar.fsdata.placements.map((e=>e.bidders)).flat().map((e=>e.bidder)))].filter((t=>e.includes(t)));t.length&&(freestar.log(1,"Found bidders",JSON.stringify(t),"which should be off!"),this.sendErrorMessage(["placement bidder setup does not match IdealAdStack config"]))}getDebugOrTestSession(){const e=S("fsdebug"),t=S("fsaltconfig"),i=window.freestar?.fsdata?.networks?.some((e=>void 0!==e.isClient||void 0!==e.isPrebidServer));if(e||t)return i;const n=Fe({key:"fs.config",type:ze.object.type})?.pubfigSettings?.abtest?.testType,s=Fe({key:g,type:ze.string.type});return(null!=n||null!=s)&&(![n,s].some((e=>"PUBFIG_TEMPLATE"===e))&&i)}isDebugOrTestSession(){return null===this.debugOrTestSession&&(this.debugOrTestSession=this.getDebugOrTestSession()),this.debugOrTestSession}isDasConfiguredBidder(e){return e===dt.CLIENT||e===dt.SERVER}isClientOnly(e,t){return e===dt.CLIENT&&!0===t.isClient}isServerOnly(e,t){return e===dt.SERVER&&!0===t.isPrebidServer}getBiddersByType(e){if(!this.active)return[];let t=this.adjustClientServer(e);return Object.keys(t).filter((i=>t[i]===e))}getAllPossibleConfigs(){const e=[];return this?.config&&e.push(this.config),this?.config?.clientServerRefresh?.forEach((t=>{t?.clientServerRTT?.forEach((t=>{t?.config&&e.push(t.config)}))})),this?.config?.clientServerRTT?.forEach((t=>{t?.config&&e.push(t.config)})),e}getAllClientServerObjects(){const e=[];return this.getAllPossibleConfigs().forEach((t=>{t?.clientServer&&e.push(t.clientServer)})),e}_buildBidderSummary(){const e=Object.fromEntries(window.freestar.fsdata.networks.map((e=>[e.slug,e.isPrebidServer?"server":"client"])));return window.freestar.fsdata.placements.forEach((function(t){t.networks.forEach((function(t){null==e[t.slug]?e[t.slug]=t.isPrebidServer?"server":"client":t.isPrebidServer&&"client"==e[t.slug]&&(e[t.slug]="both")}))})),this.getAllClientServerObjects().forEach((t=>{Object.entries(t).forEach((([t,i])=>{"off"!==i&&"both"!==e[t]&&(e[t]?e[t]!==i&&(e[t]="both"):e[t]=i)}))})),e}getBidderSummary(){return this.bidderSummary||(this.bidderSummary=this._buildBidderSummary()),this.bidderSummary}},instanceName:"idealAdstackManager"});function ht(e,t){let i;for(const n of t)e<n.lessThan&&(!i||i.lessThan>n.lessThan)&&(i=n);return i}function gt(e){const t=freestar.refreshLibrary[e];if(t)return t.timesRefreshed}"IntersectionObserver"in window&&new IntersectionObserver((function(e){e.forEach((e=>{if(freestar.refreshLibrary[e.target.id]){const t=e.isIntersecting?e.intersectionRatio:0;freestar.refreshLibrary[e.target.id].intersectionRatio=t}}))}),{root:null,threshold:.5});class mt{constructor(){this.slotMaxBids={},this.slotToPlacement={},this.placementToSlots={}}initiateWatcher(e){e.que.push((()=>{e.onEvent("bidResponse",this.handleBidResponse.bind(this))}))}handleBidResponse(e){this.addSlotPlacementAssociation(e.adUnitCode),this.addBidResponse(e)}addSlotPlacementAssociation(e){if(e&&!this.slotToPlacement[e]){const t=L({slotId:e});t&&(this.slotToPlacement[e]=t,this.placementToSlots[t]||(this.placementToSlots[t]=[]),this.placementToSlots[t].push(e))}}addBidResponse(e){const{adUnitCode:t,cpm:i}=e;t&&i&&(!this.slotMaxBids[t]||this.slotMaxBids[t]<i)&&(this.slotMaxBids[t]=i)}getSlotMaxBid(e){return mt.validateMaxBid(this.slotMaxBids[e])}getPlacementMaxBidBySlot(e){const t=this.slotToPlacement[e];return this.getPlacementMaxBid(t)}getPlacementMaxBid(e){const t=this.placementToSlots[e]||[];return mt.validateMaxBid(Math.max(...t.map((e=>this.getSlotMaxBid(e)))))}static validateMaxBid(e){return!Number.isNaN(e)&&null!=e&&e>0?e:null}}let bt=null;async function wt(e,t,i,n,s){const r=lt(),a="Apple"===e?"smartphone-ios":t,o=Ke.isKnown,d=n&&null!=s?`&mb=${s}&au=${encodeURIComponent(n)}`:"",l=freestar.locData?freestar.locData.iso:"",c=fetch(`${st}?${`d=${r}&t=${a}&k=${o}&r=${i}${d}&c=${l}`}`,{headers:{"x-api-key":nt}});return(await c).json()}class yt{constructor(e,t){this.idealAdStackManager=e,this.maxBidTracker=t,this.initialData=null,this.requests=[],this.maxBidRequests={}}async getInitialFloorsData(){if(!window.freestar?.fsdata?.isTriple13Enabled)return this.initialData={timestamp:new Date,floors:[]};const{timestamp:e,floors:t}=this.getRequest(0);return this.initialData?await t:this.initialData={timestamp:e,floors:await t},this.initialData}getRequest(e,t,i){return t&&null!=i?(this.maxBidRequests[t.name]||(this.maxBidRequests[t.name]=[null]),this.maxBidRequests[t.name][e]||(this.maxBidRequests[t.name][e]={}),this.maxBidRequests[t.name][e][i]||(this.maxBidRequests[t.name][e][i]={timestamp:new Date,floors:this.fetchData(e,t.dfpId,i)}),this.maxBidRequests[t.name][e][i]):(this.requests[e]||(this.requests[e]={timestamp:new Date,floors:this.fetchData(e)}),this.requests[e])}async fetchData(e,t,i){let n;if(0===e){const e=await this.idealAdStackManager().getFloorsData();e&&!e.error&&e.length>0&&(n=e)}if(!n){let s;if(0===e)({data:n,error:s}=await Ye().fetch({requestId:"getFloorsData",fetchFn:()=>wt(window.freestar.deviceInfo.device.vendor,window.freestar.deviceInfo.device.type,e,t,i)})),Ye().clearClassCachedData({requestId:"getFloorsData"});else try{n=await wt(window.freestar.deviceInfo.device.vendor,window.freestar.deviceInfo.device.type,e,t,i)}catch(e){s=e}if(s){const r=t&&null!=i?`, placement ${t}, maxBid ${i}`:"";freestar.log(40,`Floors request for refresh ${e}${r} error`,s.toString()),n=[]}}const{error:s,message:r}=n;return s&&(freestar.msg.que.push({eventType:"customEvent",args:{eventName:"FLOORS_ERROR",eventType:"FETCH_RESPONSE",jsonValue:JSON.stringify({message:r})}}),n=[]),n}getFloor(e,t,i){const n=t.find((e=>i.dfpId===e.adUnit)),s=n?n.upr:"timeout",r=n?new Date(n.lastUpdated):e;return{floors_id:s,floors_hour:String(r.getUTCHours())}}getInitialFloorKVP({placement:e,keyMap:t}){return t||(t={}),Object.assign(t,this.getFloor(this.initialData.timestamp,this.initialData.floors,e))}async getFloorsData({placement:e,slotId:t,callback:i,isRebid:n=!1}){let s,r;if(!window.freestar.fsdata.isTriple13Enabled)return s=null,r="inactive",void i({result:s,reason:r});const a=(gt(t)||0)+(n?1:0);let o,d;if(0===a||n)({timestamp:o,floors:d}=this.getRequest(a));else{const i=this.maxBidTracker.getSlotMaxBid(t),n=yt.formatMaxBid(i);({timestamp:o,floors:d}=this.getRequest(a,e,n))}s=this.getFloor(o,await d,e),r=null,i&&i({result:s,reason:r})}prefetchFloorsData({placement:e,slotId:t,timesRefreshed:i}){const n=this.maxBidTracker.getSlotMaxBid(t),s=yt.formatMaxBid(n);this.getRequest(i,e,s)}static formatMaxBid(e){if(null!=e){const t=e.toString();if(t){if(t.includes("e-"))return"0";if(t.includes("e"))return e.toPrecision(3);const i=e.toString().match(/^-?\d*(?:\.\d{0,2})?/);if(i){let e=i[0];for(;e.includes(".")&&(e.endsWith("0")||e.endsWith("."));)e=e.slice(0,-1);return e}}}return null}}const vt=Qe.getInstanceFn({ClassConstructor:yt,instanceName:"floorsManager",params:[ft,(null==bt&&(bt=new mt),bt)]});class _t{constructor({placement:e=null,prebid:t=null,slot:i=null}){this.placement=e,this.prebid=t,this.slot=i,this.trackers={adIds:[]},this.states=[],this.isNativeRender=!1,this.renderMap={}}update({prebid:e=null,slot:t=null}){e&&(this.prebid=e),t&&(this.slot=t)}getKVPs(){let e=null;if(this.slot){let t=this.slot.getTargetingMap(),i=Object.entries(t).map((([e,t])=>`${e}=${t}`)),n=googletag.pubads().getTargetingKeys().flatMap((e=>googletag.pubads().getTargeting(e).map((t=>`${e}=${t}`))));e=i.concat(n)}return e}getWinningBid(){return this.prebid,null}setAUUID({auuid:e}){this.slot?.setTargeting&&this.slot.setTargeting("fs-auuid",e)}getStateByAUUID({auuid:e}){return this.states.filter((t=>t.auuid===e))[0]||!1}saveState({auuid:e}){let t={};const i=this.placement.name||this.prebid.code||this.slot.getSlotElementId();freestar.rebidManager&&i&&(t=freestar.rebidManager.getStatus({adUnitCode:i})),this.setAUUID({auuid:e}),this.states.push({auuid:e,rebid:t})}setNativeRenderStatus(e){this.isNativeRender=e}getNativeRenderStatus(){return this.isNativeRender}isDisplayAd(){let e=!0;return["stickyFooter","sideWall","pushdown","stickyFooter","revolvingRail"].some((t=>{if((({placement:e,type:t})=>{let i=e&&e[t]&&null!=e[t].active&&!1!==e[t].active;return!(i||!("dynamicAdOptionsV2"===t&&e[t].dynamicAd2||"pushdownOptions"===t&&e[t].isPushdownUnit||"sideWallOptions"===t&&0!==e[t].type||"stickyAdOptions"===t&&e[t].stickyAdEnabled||"stickyFooterOptions"===t&&Object.keys(e[t]).length>0&&!1!==e[t].active))||i})({placement:this.placement,type:`${t}Options`}))return e=!1,!0})),e}}const St=new class{constructor(){this.adUnits=[]}add({placement:e=null,prebid:t=null,slot:i=null}){let n=!1;this.adUnits.some((e=>i&&e.prebid&&e.prebid.code===i.getSlotElementId()?(e.update({slot:i}),n=!0,!0):t&&e.slot&&e.slot.getSlotElementId()===t.code?(e.update({prebid:t}),n=!0,!0):void 0)),n||(e||(t&&(e=bn({name:B({slotId:t.code})})),i&&(e=bn({name:D({path:i.getAdUnitPath()}).placementName}))),e&&this.adUnits.push(new _t({placement:e,prebid:t,slot:i})))}getAdUnitByPlacementName({placementName:e}){let t=!1;return this.adUnits.some((i=>{const{placement:n}=i;if(n&&n.name===e)return t=i,!0})),t}getAdUnitByPrebidCode({code:e}){let t=!1;return this.adUnits.some((i=>{const{prebid:n}=i;if(n&&n.code===e)return t=i,!0})),t}getAdUnitBySlotElementId({elementId:e}){let t=!1;return this.adUnits.some((i=>{const{slot:n}=i;if(n&&n.getSlotElementId()===e)return t=i,!0})),t}getAdUnitBySlotAdUnitPath({adUnitPath:e}){let t=!1;return this.adUnits.some((i=>{const{slot:n}=i;if(n&&n.getAdUnitPath()===e)return t=i,!0})),t}};window.freestar&&window.freestar.queue&&window.freestar.queue.push((()=>{window.freestar.adUnitManager=St}));class It{constructor(){this.slug="fsxs2s"}addToPlacementAsBidder(){return{bidder:this.slug,params:{}}}getSlug(){return this.slug}hasTopLevelStoredRequest(){const{topLevelStoredRequestId:e}=window.freestar.fsdata;return e&&e.length}hasImpLevelStoredRequests(){const{placements:e}=window.freestar.fsdata;return e.filter((e=>e.storedRequestId&&e.storedRequestId.length)).length}hasValidStoredRequests(){return this.hasImpLevelStoredRequests()||this.hasTopLevelStoredRequest()}}const At="FsClientAux",kt={},Tt={};function Et(e){const t=xt(e);if(!kt[t]){const e=`${t}${At}`;kt[t]=e,Tt[e]=t,fsprebid.que.push((()=>{fsprebid.aliasBidder(t,e)}))}return kt[t]}function xt(e){return Tt[e]||e}const Ct="FREESTAR VIDEO v1.0.0",Pt={title:Ct,styles:"background: black; color: white; border-radius: 3px; padding: 3px"},Rt="FOP",Bt=["adsready","adRequest","adserror","loadstart","adImpression","adComplete","impression","progress","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","play","pause","ratechange","resize","volumechange"];class Dt{constructor({params:e}){this.uuid=gn(),this.params=e,this._playerId=`fsPlayer_${this.uuid}`}init(){}bindEvents(){this.player.on(Bt,this.handlePlayerEvent.bind(this)),this.player.on("ads-manager",(e=>{const{adsManager:t}=e;Object.keys(window.google.ima.AdEvent.Type).forEach((e=>{t.addEventListener(window.google.ima.AdEvent.Type[e],this.handlePlayerEvent.bind(this))}))}))}addPlayer(){this.player=window.videojs(this._playerId)}addHTML(){}addCSS(){}getLargestPossibleDimensions({placement:e}){let{sizes:t}=e;return t=t.filter((e=>Array.isArray(e))),[t.sort(((e,t)=>t[0]-e[0]))[0][0],t.sort(((e,t)=>t[1]-e[1]))[0][1]]}renderAd(){}handlePlayerEvent(e){const{type:t}=e;switch(t){case"impression":this.handleImpressionEvent({event:e});break;case"volumechange":case"volumeChange":this.handleVolumeChangeEvent({event:e});break;case"allAdsCompleted":this.handleAllAdsCompleteEvent({event:e});break;case"adsready":this.handleAdsReadyEvent({event:e});break;case"ended":this.handleEndedEvent({event:e});break;case"adserror":this.handleAdsErrorEvent({event:e})}}handleEndedEvent({event:e}){freestar.log(Pt,"handleEnded",e)}handleAdsReadyEvent({event:e}){freestar.log(Pt,"handleAdsReadyEvent",e)}handleAdsErrorEvent({event:e}){freestar.log(Pt,"handleAdsErrorEvent",e)}handleVolumeChangeEvent(){this.player.ima.getAdsManager()&&0!==this.player.ima.getAdsManager().getVolume()&&this.player.ima.getAdsManager().setVolume(0)}handleImpressionEvent({event:e}){freestar.log(Pt,"handleImpressionEvent",e)}handleAllAdsCompleteEvent({event:e}){freestar.log(Pt,"handleAllAdsCompleteEvent",e)}remove(){}sendEvent({name:e=Ct,type:t,value:i}){window.freestar.msg.que.push({eventType:"customEvent",args:{eventName:e,eventType:t,jsonValue:JSON.stringify(Object.assign({name:this.placement.name,uuid:this.uuid},i))}})}}class Ot{constructor({aps:e=!1,apsSlot:t=`springserve_${window.freestar.fsdata.siteId}_${location.host.split(".").length>2?location.host.split(".")[1]:location.host.split(".")[0]}`,pbjs:i=!0,pbjsCode:n,auctionTimeout:s=5e3,cb:r=null}){this.aps=e,this.apsSlot=t,this.pbjs=i,this.pbjsCode=n,this.auctionTimeout=s,this.auctionCutoff=2e4,this.cb=r,this.finished=[],this.init()}init(){this.requestBids()}requestBids(){this.aps&&this.requestAPSBids(),this.pbjs&&this.requestPBJSBids(),(this.aps||this.pbjs)&&(this.timer=setTimeout((()=>{clearTimeout(this.timer),window.freestar.msg.que.push({eventType:"customEvent",args:{eventName:Ct,eventType:"videoAuctionTimeout",jsonValue:JSON.stringify({pbjsCode:this.pbjsCode})}}),this.finishRequestingBids()}),this.auctionCutoff))}requestAPSBids(){window.apstag&&window.apstag.fetchBids({timeout:this.auctionTimeout,slots:[{slotID:this.apsSlot,mediaType:"video"}]},(e=>{this.finished.push("aps"),this.apsBids=e,this.checkIfBidsFinished()}))}requestPBJSBids(){window.fsprebid.requestBids({adUnitCodes:[this.pbjsCode],bidsBackHandler:e=>{const{bids:t=[]}=e[this.pbjsCode]||{};this.finished.push("pbjs"),this.pbjsBids=t,this.checkIfBidsFinished()}})}checkIfBidsFinished(){const e=[];this.aps&&e.push("aps"),this.pbjs&&e.push("pbjs");e.every((e=>this.finished.includes(e)))&&(clearTimeout(this.timer),this.finishRequestingBids())}finishRequestingBids(){if(this.cb)try{this.cb(this)}catch(e){console.error(e)}}}class Lt{constructor({player:e,adTagUrl:t="DEFAULT",uuid:i,placement:n}){this.player=e,this.adTagUrl=t,this.placement=n,this.uuid=i}renderAd(){"function"==typeof this.player.ima?(this.player.ima({adTagUrl:this.adTagUrl}),this.player.loadMedia({id:"XVXVXVXV",src:"https://a.pub.network/core/videos/blank1s-20231016.mp4",type:"video/mp4"})):(this.player.ima.changeAdTag(this.adTagUrl),this.player.ima.requestAds())}}class Mt extends Lt{constructor({player:e,adTagUrl:t,uuid:i,placement:n}){super({player:e,adTagUrl:t,uuid:i,placement:n}),this.init(),this.adTagUrl=t}init(){this.renderAd()}}class qt extends Lt{constructor({player:e,placement:t,bids:i,uuid:n,videoAd:s}){super({player:e,uuid:n,placement:t}),this.videoAd=s,this.bids=i,this.consentData=null,Cn((e=>{this.consentData=e})),this.init()}init(){this.updateAdTagURL(),this.renderAd()}updateAdTagURL(){this.adTagUrl=`https://tv.springserve.com/rt/${this.videoAd.videoId}?w=400&h=225&url=${encodeURIComponent(location.href)}&cb=${Math.random()}&consent=${this.consentData&&this.consentData.gdpr?this.consentData.gdpr.tcString:""}&gdpr=${this.consentData&&this.consentData.gdpr?1:0}&us_privacy=${this.consentData&&this.consentData.usp?this.consentData.usp.uspString:""}&schain=1.0,1!freestar.com,${window.freestar.fsdata.companyId},1,,,,`+this.getFloorBasedOnBids()+this.getAPSBids()+this.getGPID()}getGPID(){return this.placement.dfpId&&this.placement.name?`&gpid=${this.placement.dfpId}/${this.placement.name}`:""}getFloorBasedOnBids(){return this.bids.pbjsBids&&0!==this.bids.pbjsBids.length?`&bid_floor=${this.bids.pbjsBids[0].cpm}`:""}getAPSBids(){if(!this.bids.apsBids||this.bids.apsBids.length<=0)return"";const e=this.bids.apsBids[0];return"&amznbid="+e.amznbid+"&amzniid="+e.amzniid}}const Nt="session",jt="page",$t="productOption",Ut="placementSessionCap",zt="placementPageCap";class Ft{constructor({win:e=window,placement:t,product:i,callback:n,pageLevelCapPathOption:s=zt,sessionLevelCapPathOption:r=Ut}){this.win=e,this.placement=t,this.product=i,this.productKey=i+"Options",this.pageLevelCapPathOption=s,this.sessionLevelCapPathOption=r,this.key=`fs.${this.product}.sessionfrequencycap`,this.callback=n,this.pageLevelData={},this.sessionLevelData={},this.init()}init(){this.win.freestar?.frequencyLibraryV2||(this.win.freestar.frequencyLibraryV2={}),this.setCapData(),this.win.freestar.frequencyLibraryV2[this.placement.name]=this}resetIteration({level:e=jt}={}){e===jt?this.pageLevelData.iteration=0:(this.sessionLevelData.iteration=0,sessionStorage.setItem(this.key,"0"))}incrementIteration(){this.pageLevelData.iteration++,this.sessionLevelData.iteration++,sessionStorage.setItem(this.key,this.sessionLevelData.iteration.toString())}subtractIteration(){freestar.log(1,"Frequency Cap: iteration will remove this attempt as an iteration. Setting new sessionStorage item value."),this.pageLevelData.iteration>0&&this.pageLevelData.iteration--,this.sessionLevelData.iteration>0&&(this.sessionLevelData.iteration--,sessionStorage.setItem(this.key,this.sessionLevelData.iteration.toString()))}getCapPath(e){return{[$t]:this.placement?.[this.productKey]?.cap,[Ut]:this.placement?.sessionFrequencyCap,[zt]:this.placement?.pageViewFrequencyCap}[e]}getCapValue(e){return e&&e>0?e:-1}setCapData(){this.pageLevelData={cap:this.getCapValue(this.getCapPath(this.pageLevelCapPathOption)),iteration:this.getIteration({level:jt})},this.sessionLevelData={iteration:this.getIteration({level:Nt}),cap:this.getCapValue(this.getCapPath(this.sessionLevelCapPathOption))}}getIteration({level:e}={}){if(e===Nt){const e=sessionStorage.getItem(this.key);return Number(e)||0}if(e===jt)return this.pageLevelData.iteration||0}hasExceededCap(e){const{iteration:t,cap:i}=e;return i>0&&t>=i}isProductAllowed(){const e=this.hasExceededCap(this.sessionLevelData),t=this.hasExceededCap(this.pageLevelData);if(e||t){const t=e?"session":"page",i=e?this.sessionLevelData:this.pageLevelData;return freestar.log(1,`Frequency Cap: iteration of ${i.iteration} is higher than cap of ${i.cap}. ${this.product} will not run again until the next ${t}.`),!1}return freestar.log(1,`Frequency Cap: iteration of ${Math.max(this.sessionLevelData.iteration+1,this.pageLevelData.iteration+1)} is lower than or equal to the cap. Continue with ${this.product}.`),!0}}const Vt="SMALL",Gt="LARGE",Ht="CUSTOM",Wt=({width:e=0}={})=>[e,Math.round(9*e/16)],Jt={[Vt]:()=>[312,176],[Gt]:()=>[400,225],[Ht]:Wt},Kt={[Vt]:()=>["45%",300],[Gt]:()=>["100%",400],[Ht]:Wt},Qt={[Vt]:()=>[300,200],[Gt]:()=>[400,300],[Ht]:Wt},Yt={[Vt]:()=>[300,200],[Gt]:()=>[400,300],[Ht]:Wt};class Zt extends Dt{static adType="INCONTENT";constructor({params:e,doc:t=document,win:i=window}){super({params:e}),this._loggingLevel=1,this._name="InContentVideoAd";const{callback:n,videoAd:s}=this.params;if(n&&"function"!=typeof n)throw new Error("Callback must be a function");this.callback=n,this.videoAd=s,this._document=t,this._window=i,this._stylesheetId=`fs-player-${this.uuid}`,this._containerId=`fs-player-container-${this.uuid}`,this.placement=this._createVideoPlacement(s),this.adUnit=this._createAdUnit(this.placement);const{timeToWaitBetweenVideos:r=5}=this.videoAd;this._delayBetweenAdsMs=1e3*r,this._nextAdTimeoutId=null,this.init()}init(){if(this.initFrequencyCap(),!this.frequencyCapManager.isProductAllowed())return this.callback(null,{uuid:this.uuid});if(!this.targetElement)return this._window.freestar.log(this._loggingLevel,`${this._name}: Target element "${this.videoAd.name}" not found.`),void this.callback?.(`Target element "${this.videoAd.name}" not found.`,{uuid:this.uuid});this._validateVideoAd()&&(this.addHTML(),this.addCSS(),this._window.fsprebid.addAdUnits([this.adUnit]),this._requestFirstBid(),this._window.freestar.log(this._loggingLevel,`InContentVideoPlayer: Initialized for "${this.videoAd.name}"`))}initFrequencyCap(){const{videoAd:e}=this.params,{vendor:t,adType:i}=e;this.frequencyCapManager=new Ft({placement:e,product:`${t}_${i}`})}get targetElement(){const{parentElement:e,classIndex:t,name:i}=this.videoAd;if(e){const i=t>-1?t:0;return this._document.querySelectorAll(e)[i]}return this._document.getElementById(i)}get playerContainerElement(){return this._document.getElementById(this._containerId)}addHTML(){if(!this.playerContainerElement){const e=Wn({type:"div",id:this._containerId});this.targetElement.appendChild(e)}}_removeHTML(){this.playerContainerElement?.remove()}_addVideoElement(e=this.playerContainerElement){if(!e)return;let t=this._document.getElementById(this._playerId);t||(t=Wn({type:"video",id:this._playerId,classList:["video-js","vjs-16-9","vjs-default-skin"],attributes:[{muted:!0},{playsinline:!0}]}),e.appendChild(t))}addCSS(){const{width:e,height:t}=this._getVideoPlayerDimensions();let i=!1,n=this._document.getElementById(this._stylesheetId);n||(n=Wn({type:"style",id:this._stylesheetId}),i=!0),n.textContent=`\n            #${this._containerId} {\n                display: flex;\n                align-items: center;\n                justify-content: center;\n\n                width: ${e};\n                min-height: ${t};\n\n                margin: 0 auto;\n                border-radius: 10px;\n\n                position: relative;\n\n                border-radius: 10px;\n                border: 0px;\n                overflow: hidden;\n            }\n\n            #${this._containerId}:after {\n                content: 'ADVERTISEMENT';\n\n                display: block;\n                position: absolute;\n                top: 50%;\n                left: 50%;\n                transform: translateX(-50%);\n                z-index: 1;\n\n                font-family: sans-serif;\n                font-size: 0.8rem;\n                color: #646464;\n            }\n        `,i&&this._document.head.appendChild(n)}_getVideoPlayerDimensions(){const e="mobile"===this._window.freestar.deviceInfo.device.type?Kt:Jt,t=e[this.videoAd.playerSize]||e[Gt],[i,n]=t({width:this.videoAd.width});return{width:"number"==typeof i?`${i}px`:i,height:"number"==typeof n?`${n}px`:n}}renderAd(e){this._addVideoElement(),this.addPlayer(),this.bindEvents(),this._window.freestar.debug&&this._window.freestar.log(this._loggingLevel,`${this._name}: Rendering Ad for "${this.videoAd.name}"`),this.bids=e,this.renderer=new qt({player:this.player,bids:e,placement:this.placement,videoAd:this.videoAd}),this.onRender?.()}completeAd(){if(this.player){if(this.player.dispose(),this.player=null,this.renderer=null,this._window.freestar.debug&&this._window.freestar.log(this._loggingLevel,`${this._name}: Video Ad "${this.videoAd.name}" completed.`),this.frequencyCapManager.incrementIteration(),!this.frequencyCapManager.isProductAllowed())return this.callback(null,{uuid:this.uuid});this._scheduleNextAd(),this.onCompleted?.()}}handleEndedEvent(){this.completeAd()}handleAdsReadyEvent(){this.player.play()}handleAdsErrorEvent(){const{pbjsBids:e}=this.bids??{},[t]=e||[];this.renderer instanceof qt&&t?.cpm>=1?this.renderer=new Mt({player:this.player,adTagUrl:t.vastUrl}):this.completeAd()}handleAllAdsCompleteEvent(){this.completeAd()}remove(){this.player?.dispose(),this._removeHTML(),this._window.clearTimeout(this._nextAdTimeoutId),this._window.fsprebid.removeAdUnit(this.adUnit.code)}_scheduleNextAd=(e=this._delayBetweenAdsMs)=>{this._nextAdTimeoutId&&this._window.clearTimeout(this._nextAdTimeoutId),this._window.freestar.debug&&this._window.freestar.log(this._loggingLevel,`${this._name}: Scheduling next Ad in ${e}ms for "${this.videoAd.name}"`),this._nextAdTimeoutId=this._window.setTimeout((()=>{this._requestBids()}),e)};_requestBids(){this.request=new Ot({aps:this.videoAd.amazonActive,apsSlot:this.videoAd.amazonApsSlot||null,pbjs:!0,pbjsCode:this.adUnit.code,cb:this._handleBidResponse})}_requestFirstBid(){this.videoAd.delayTime?this._scheduleNextAd(1e3*this.videoAd.delayTime):this._requestBids()}_handleBidResponse=(e={})=>{this.renderAd(e)};_createVideoPlacement(e){const{name:t,prebidStoredRequestId:i}=e,n=this._getPlayerSize();return{name:t,bidders:[{bidder:"appnexus",params:{placementId:32347997}}],sizes:[n],ignoreSiteBidders:!0,sizeMappings:[{size:n,viewport:{size:[0,0]},mediaTypes:["video"]},{size:n,viewport:{size:[768,0]},mediaTypes:["video"]}],storedRequestId:i}}_getPlayerSize(){const{width:e,playerSize:t}=this.videoAd,i="mobile"===this._window.freestar.deviceInfo.device.type?Yt:Qt;return[(i[t]??i[Gt])({width:e})]}_createAdUnit(e){const t=gi(e);return t.mediaTypes.video={...t.mediaTypes.video,context:"outstream",renderer:{url:"https://a.pub.network/core/videos/blank1s-20231016.mp4",render:()=>{}}},this._window.fsprebid.addAdUnits([t]),t}_validateVideoAd(){const{adType:e,vendor:t}=this.videoAd;return e===this.constructor.adType&&"FREESTAR_OUTSTREAM_PLAYER"===t||(this._window.freestar.log(this._loggingLevel,`${this._name}: Invalid ad type or vendor for "${this.videoAd.name}".`),this.callback?.(`Invalid ad type or vendor for "${this.videoAd.name}".`,{uuid:this.uuid}),!1)}}const Xt="Video Messaging: ";function ei({eventType:e,args:t}){window.freestar.msg.que.push({eventType:e,args:t})}let ti=!1,ii=!1;class ni extends Dt{constructor({params:e}){super({params:e}),this.params=e;const{callback:t,videoAd:i,placement:n}=this.params;this.callback=t,this.placement=n,this.videoAd=i,this.videoPlacement=(e=>{const{name:t,sizeMappings:i}=ye(e),n={name:t,bidders:[{bidder:"appnexus",params:{placementId:32347997}}],sizes:[[400,300]],sizeMappings:i};return n.name=n.name+"_outstream",n.ignoreSiteBidders=!0,n.sizeMappings=n.sizeMappings.map((e=>(e.mediaTypes=["video"],e.playerSize&&"LARGE"===e.playerSize&&(e.size=[[400,300]]),e.playerSize&&"SMALL"===e.playerSize&&(e.size=[[300,200]]),e))),n._storedRequestId="6d0caa66-2299-488d-a87a-1a82fcea7862",n})(this.placement),this.prebidAdUnit=this.addPrebidAdUnit(),this.pbjsConfigs={original:{ortb2:{...fsprebid.getConfig("ortb2")},s2sConfig:{...fsprebid.getConfig("s2sConfig")}},outstream:{ortb2:{...fsprebid.getConfig("ortb2")},s2sConfig:{...fsprebid.getConfig("s2sConfig")}}},this.pbjsConfigs.outstream.ortb2.ext.prebid.storedreques||(this.pbjsConfigs.outstream.ortb2.ext.prebid.storedrequest={}),this.pbjsConfigs.outstream.ortb2.ext.prebid.storedrequest.id="6d0caa66-2299-488d-a87a-1a82fcea7862",this.pbjsConfigs.outstream.s2sConfig.bidders=["appnexus"],this.init()}init(){ii||(ii=!0,this.sendEvent({type:"videoTagLoaded",value:{player:Rt,placementId:this.placement.name}})),this.sendEvent({type:"videoPlayerLoaded",value:{player:Rt,placementId:this.placement.name}}),this.initFrequencyCap(),this.frequencyCapManager.isProductAllowed()&&(this.addCSS(),this.addHTML(),this.addPlayer(),this.bindEvents(),ti||(fsprebid.onEvent("auctionEnd",(e=>{e.adUnitCodes.includes(this.prebidAdUnit.code)&&this.updatePrebidConfig("original")})),ti=!0),this.updatePrebidConfig(),this.requestBids())}addPrebidAdUnit(){const e=gi(this.videoPlacement);return e.mediaTypes.video.context="outstream",window.fsprebid.addAdUnits([e]),e}initFrequencyCap(){const{videoAd:e}=this.params,{vendor:t,adType:i}=e;this.frequencyCapManager=new Ft({placement:e,product:`${t}_${i}`})}getDeviceType(){return"mobile"!==freestar.deviceInfo.device.type?"desktop":"mobile"}getVideoPlayerDimensions(){let e="400px",t="225px";if("desktop"===this.getDeviceType())"LARGE"===this.videoAd.playerSize?(e="400px",t="225px"):(e="312px",t="176px");else"LARGE"===this.videoAd.playerSize?(e="100%",t="175px"):(e="45%",t="112px");return{width:e,height:t}}addHTML(){const e=Wn({type:"div",id:"fs-player-container",classList:["fs-hide"]});e.innerHTML=`\n            <div class='fs-player-close' aria-labe='Close Player'>\n                <button class='fs-close-button'>&nbsp;</button>\n            </div>\n            <div class='fs-player-container-shim'>\n                <video id='fsPlayer_${this.uuid}' muted playsinline class='video-js vjs-16-9 vjs-default-skin'></video>\n            </div>\n        `,document.body.appendChild(e),e.querySelector("button").addEventListener("click",(()=>{this.remove({params:{userEnded:!0}})}))}addCSS(){const e=Wn({type:"style",id:"fs-video-player"}),{width:t,height:i}=this.getVideoPlayerDimensions(),n="B"===this.videoAd.videoAdhesionPosition.split("")[0]?"bottom":"top",s="R"===this.videoAd.videoAdhesionPosition.split("")[1]?"right":"left";e.textContent=`\n            #fs-player-container {\n                position: fixed;\n                border: 1px solid black;\n                border-radius: 5px;\n                overflow: visible;\n                background-color: black;\n                z-index: 2147483647;\n                ${n}: 0;\n                ${s}: 0;\n                width: ${t};\n                height: ${i};\n                transition: ${s} .5s;\n            }\n            .fs-player-close {\n                position: absolute;\n                top: -13px;\n                right: 5px;\n                width: 20px;\n                height: 20px;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                z-index: 2147483647;\n            }\n            .fs-player-close button {\n                top: inherit !important;\n                right: inherit !important;\n            }\n            #fs-player-container.fs-hide {\n                visibility: hidden;\n            }\n            #fs-player-container.fs-hide * {\n                visibility: hidden;\n            }\n        `,"desktop"===this.getDeviceType()?e.textContent+=`\n                #fs-player-container {\n                    box-shadow: 0px 0px 15px 0px rgba(0,0,0,0.75);\n                    ${n}: 10px;\n                }\n                #fs-player-container.fs-hide {\n                    ${s}: -${t};\n                }\n                #fs-player-container.fs-show {\n                    ${s}: 10px;\n                }\n            `:e.textContent+="\n                .fs-player-container-shim {\n                    margin: 0 auto;\n                    max-width: 300px;\n                }\n            ",document.head.appendChild(e)}updatePrebidConfig(e="outstream"){let t=fsprebid.getConfig("s2sConfig"),i=fsprebid.getConfig("ortb2");if("outstream"===e)t.bidders=["appnexus"],i.ext.prebid.storedrequest.id="6d0caa66-2299-488d-a87a-1a82fcea7862";else t.bidders=this.pbjsConfigs.original.s2sConfig.bidders,i.ext.prebid.storedrequest.id=this.pbjsConfigs.original.ortb2.ext.prebid.storedrequest.id;window.fsprebid.mergeConfig({s2sConfig:t,ortb2:i})}requestBids(){this.request=new Ot({aps:this.videoAd.amazonActive,apsSlot:this.videoAd.amazonApsSlot||null,pbjs:!0,pbjsCode:this.prebidAdUnit.code,cb:this.handleBidResponse.bind(this)})}handleBidResponse(e){this.sendPbjsBidsEvent(),this.renderAd({data:e})}sendPbjsBidsEvent(){0!==this.request.pbjsBids.length&&this.request.pbjsBids.forEach((e=>{this.sendEvent({type:"videoBidRequest",value:{placementId:this.placement.name,player:Rt,bids:[e]}})}))}renderAd({data:e}){this.bids=e,this.renderer=new qt({player:this.player,bids:this.bids,placement:this.placement,videoAd:this.videoAd})}handleAdsReadyEvent(){this.player.play()}handleAdsErrorEvent(){const{pbjsBids:e=[]}=this.bids;this.renderer instanceof qt&&e&&0!==e.length&&e[0].cpm>=1?this.renderer=new Mt({player:this.player,adTagUrl:this.bids.pbjsBids[0].vastUrl}):this.remove({error:!1})}handleImpressionEvent({event:e}){if(this.show(),function({bidder:e,cpm:t=null,requestTimestamp:i,videoAd:n,playerType:s=null}){const r=Date.now(),a={bidder:xt(e),cpm:t,playerType:s,placementId:n.name||n.id,requestTimestamp:i,responseTimestamp:r,timeToRespond:r-i};freestar.log({title:"VIDEO"},Xt+`bid won for bidder ${e} and placement id ${n.name}.\nVIDEO MSG OBJECT: ${JSON.stringify(a)}`),ei({eventType:"outstreamBidWon",args:a})}({bidder:Ct,requestTimestamp:Date.now(),videoAd:this.videoAd,playerType:this.renderer instanceof qt?"springserve":"prebid"}),this.renderer instanceof Mt){const e={...this.request.pbjsBids[0]};e.videoAdserverTargeting=[e.adserverTargeting],delete e.adserverTargeting,this.sendEvent({type:"videoBidImpression",value:{player:Rt,placementId:this.placement.name,...e}})}const{adSystem:t,creativeAdId:i,creativeId:n,duration:s,universalAdIds:r,vastMediaHeight:a,vastMediaWidth:o}=e.ad.data;this.sendEvent({type:"videoAdImpression",value:{player:Rt,placementId:this.placement.name,adSystem:t,creativeAdId:i,creativeId:n,duration:s,universalAdIds:r,vastMediaHeight:a,vastMediaWidth:o}})}handleAllAdsCompleteEvent(){this.frequencyCapManager.incrementIteration(),this.hide(),this.remove({})}show(){const e=document.getElementById("fs-player-container");e&&(e.classList.remove("fs-hide"),e.classList.add("fs-show"))}hide(){const e=document.getElementById("fs-player-container");e&&(e.classList.add("fs-hide"),e.classList.remove("fs-show"))}remove({error:e=!1}){this.hide(),fsprebid.removeAdUnit(this.prebidAdUnit.code);const t=document.getElementById("fs-player-container");t&&t.remove();const i=document.getElementById("fs-video-player");i&&i.remove(),this.frequencyCapManager.isProductAllowed()&&this.callback&&this.callback(e,{ended:!0})}}class si extends Dt{constructor({params:e}){super({params:e}),this.init()}init(){if(this.initFrequencyCap(),!this.frequencyCapManager.isProductAllowed())return this.callback(null,{uuid:this.uuid});const{bid:e}=this.params,{adUnitCode:t,vastUrl:i,adId:n}=e;this.adUnit=St.getAdUnitByPrebidCode({code:t}),this.addCSS(),this.addHTML({targetElm:document.getElementById(t)}),this.addPlayer(),this.bindEvents(),this.renderAd({vastUrl:i,adId:n})}addHTML({targetElm:e=document.body}){const t=Wn({type:"div",id:`fs-player-container_${this.uuid}`});t.innerHTML=`\n            <div class='fs-player-container-shim'>\n                <video id='fsPlayer_${this.uuid}' muted playsinline class='video-js vjs-16-9 vjs-default-skin'></video>\n            </div>\n        `,e.appendChild(t)}addCSS(){const e=Wn({type:"style",id:`fs-player_${this.uuid}`}),t=this.getLargestPossibleDimensions({placement:this.adUnit.placement}),i=this.getPlayer16x9Dimensions({width:.95*t[0],height:.95*t[1]});e.textContent=`\n            #fs-player-container_${this.uuid} {\n                width: ${t[0]}px;\n                height: ${t[1]}px;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                background-color: #d3d3d3;\n            }\n            #fs-player-container_${this.uuid}>.fs-player-container-shim {\n                width: ${i.width}px;\n                height: ${i.height}px;\n                border-radius: 10px;\n                border: 0px;\n                overflow: hidden;\n            }\n        `,document.head.appendChild(e)}getPlayer16x9Dimensions({width:e,height:t}){let i=Math.min(e,Math.round(16/9*t));return{width:i,height:Math.round(9/16*i)}}getLargestPossibleDimensions({placement:e}){let{sizes:t}=e;return t=t.filter((e=>Array.isArray(e))),[t.sort(((e,t)=>t[0]-e[0]))[0][0],t.sort(((e,t)=>t[1]-e[1]))[0][1]]}initFrequencyCap(){const{videoAd:e}=this.params,{vendor:t,adType:i}=e;this.frequencyCapManager=new Ft({placement:e,product:`${t}_${i}`})}renderAd({vastUrl:e,adId:t}){const{prebid:i}=this.adUnit;freestar.refreshLibrary[i.code]&&(freestar.refreshLibrary[i.code].disableRefresh=!0),this.renderer=new Mt({player:this.player,adTagUrl:e}),fsprebid.markWinningBidAsUsed({adId:t})}handleAdsReadyEvent(){this.player.play()}handleAdsErrorEvent(){this.remove()}handleImpressionEvent(){}handleAllAdsCompleteEvent(){this.frequencyCapManager.incrementIteration(),this.remove()}remove(){const{prebid:e,slot:t}=this.adUnit;e&&freestar.refreshLibrary[e.code]&&(freestar.refreshLibrary[e.code].disableRefresh=!1),this.frequencyCapManager.isProductAllowed()&&freestar.refresh([t.getSlotElementId()]),this.player.dispose()}}const ri={BR:{bottom:10,right:10},BL:{bottom:10,left:10},TR:{top:10,right:10},TL:{top:10,left:10},mobile:{top:10,left:"50%",transform:"translateX(-50%)"}},ai=({adLocation:e="BR",isMobile:t=!1,topSpacing:i,bottomSpacing:n})=>{const s=["TR","TL"].includes(e)&&t?ri.mobile:ri[e];return s?Object.entries(s).reduce(((e,[t,s])=>("top"===t&&"number"==typeof s&&i&&(s+=i),"bottom"===t&&"number"==typeof s&&n&&(s+=n),e+`${t}: ${(e=>"number"==typeof e?`${e}px`:e)(s)};`)),""):""};class oi extends Zt{static adType="FLOATING";constructor({params:e,doc:t=document,win:i=window}){super({params:e,doc:t,win:i}),this._name="FloatingVideoAd"}get targetElement(){const{parentElement:e,classIndex:t,name:i}=this.videoAd;if(e){const i=t>-1?t:0;return this._document.querySelectorAll(e)[i]}const n=this._document.getElementById(i);return n||this._document.body}addCloseButton(){if(!this.playerContainerElement)return;const e=Wn({type:"div",classList:["fs-player-close"],attributes:[{"aria-label":"Close Player"}]}),t=Wn({type:"button",classList:["fs-close-button"]});t.innerHTML="&nbsp;",t.addEventListener("click",(()=>this.callback(null,{uuid:this.uuid}))),e.appendChild(t),this.playerContainerElement.appendChild(e)}addHTML(){super.addHTML(),this.addCloseButton()}addCSS(){const{width:e,height:t}=this._getVideoPlayerDimensions();let i=!1,n=this._document.getElementById(this._stylesheetId);n||(n=Wn({type:"style",id:this._stylesheetId}),i=!0),n.textContent=`\n            #${this._containerId} {\n                display: flex;\n                align-items: center;\n                justify-content: center;\n\n                width: ${e};\n                min-height: ${t};\n\n                margin: 0 auto;\n                border-radius: 10px;\n                border: 0px;\n\n                position: fixed;\n                z-index: 9999;\n                ${this._adPosition}\n            }\n\n            #${this._containerId} .fs-player-close {\n                visibility: hidden;\n\n                position: absolute;\n                ${["TL","TR"].includes(this._adLocation)?"bottom":"top"}: -13px;\n                right: 5px;\n\n                z-index: 10000;\n            }\n\n            #${this._containerId} .fs-player-close button {\n                top: inherit !important;\n                right: inherit !important;\n            }\n        `,i&&this._document.head.appendChild(n)}get _adPosition(){const{headerHeight:e}=this.videoAd,{bottomSpacing:t}=this.params||{},i="mobile"===(this._window.freestar.deviceInfo.device.type||"desktop");return ai({adLocation:this._adLocation,isMobile:i,topSpacing:e,bottomSpacing:t})}get _adLocation(){return this.videoAd.adLocation||"BR"}_setCloseButtonVisibility(e){const t=this.playerContainerElement.querySelector(".fs-player-close");t&&(t.style.visibility=e?"visible":"hidden")}onRender(){this._setCloseButtonVisibility(!0)}onCompleted(){this._setCloseButtonVisibility(!1)}}const di={root:null,rootMargin:"0px",threshold:.5},li="fs-in-content",ci="fs-floating";class ui extends Zt{static adType="INCONTENT_TO_FLOATING";constructor(e){super(e),this._name="InContentToFloatingVideoAd",this._observer=null,this._isInFloatingMode=!1,this._isLockedInContent=!1,this._attachIntersectionObserver()}addHTML(){if(!this.playerContainerElement){const e=function({classList:e=[]}={}){return Wn({type:"button",classList:e,attributes:[{"aria-label":"Close Ad"},{tabindex:0}]})}({classList:["fs-close-button"]});e.addEventListener("click",(()=>this._handleClose()));const t=Wn({type:"div",id:this._containerId,children:[Wn({type:"div",classList:["fs-player-close"],attributes:[{"aria-label":"Close Player"}],children:[e]})]}),i=Wn({type:"div",id:`${this._containerId}-placeholder`,children:[t]});this.targetElement.appendChild(i)}}addCSS(){const{width:e,height:t}=this._getVideoPlayerDimensions(),i="mobile"===this._window.freestar.deviceInfo?.device?.type,{headerHeight:n}=this.videoAd,{bottomSpacing:s}=this.params||{};let r=!1,a=this._document.getElementById(this._stylesheetId);a||(a=Wn({type:"style",id:this._stylesheetId}),r=!0),a.textContent=`\n                #${this._containerId}-placeholder {\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n    \n                    width: ${e};\n                    min-height: ${t};\n    \n                    margin: 0 auto;\n                    border-radius: 10px;\n\n                    position: relative;\n\n                    overflow: hidden;\n                }\n\n                #${this._containerId}-placeholder:after {\n                    content: 'ADVERTISEMENT';\n    \n                    display: block;\n\n                    position: absolute;\n                    top: 50%;\n                    left: 50%;\n                    z-index: 1;\n                    transform: translateX(-50%);\n    \n                    font-family: sans-serif;\n                    font-size: 0.8rem;\n                    color: #646464;\n                }\n\n                #${this._containerId} {\n                    width: ${e};\n                    min-height: ${t};\n    \n                    border-radius: 10px;\n                    border: 0px;\n                }\n\n                .${li} {\n                    position: relative;\n                }\n\n                .${ci} {\n                    position: fixed;\n                    z-index: 9999;\n\n                    ${ai({adLocation:this._adLocation,isMobile:i,topSpacing:n,bottomSpacing:s})}\n                }\n\n                #${this._containerId} .fs-player-close {\n                    visibility: hidden;\n\n                    position: absolute;\n                    ${["TL","TR"].includes(this._adLocation)?"bottom":"top"}: -13px;\n                    right: 5px;\n\n                    z-index: 10000;\n                }\n\n                #${this._containerId} .fs-player-close button {\n                    top: inherit !important;\n                    right: inherit !important;\n                }\n            `,r&&this._document.head.appendChild(a)}_setCloseButtonVisibility(e){const t=this.playerContainerElement.querySelector(".fs-player-close");t&&(t.style.visibility=e?"visible":"hidden")}_removeHTML(){const e=this._document.getElementById(`${this._containerId}-placeholder`);e?.remove()}remove(){super.remove(),this._observer?.disconnect(),this._observer=null}_updateStyles(){if(!this.playerContainerElement)return;const{classList:e}=this.playerContainerElement;if(this._isInFloatingMode&&!this._isLockedInContent)return e.add(ci),void e.remove(li);e.remove(ci),e.add(li)}get _adLocation(){return this.videoAd.adLocation||"BR"}_handleClose(){this._isLockedInContent=!0,this._updateStyles()}_attachIntersectionObserver(){this._observer=new IntersectionObserver(this._onIntersection,di),this._observer.observe(this.targetElement)}_onIntersection=e=>{e.forEach((e=>{const t=!e.isIntersecting;t!==this._isInFloatingMode&&(this._isInFloatingMode=t,this._updateStyles())}))};onRender(){this._setCloseButtonVisibility(!0)}onCompleted(){this._setCloseButtonVisibility(!1)}}class pi{constructor(){this.loaded=!1,this.queued=[],this.videoPlayers={},this.init()}init(){window.freestar.queue.push((()=>{this.addVideoJS()}))}add({params:e,type:t="OUTSTREAM"}){if(this.loaded){let i=!1;"DISPLAY"===t&&(i=new si({params:e})),"OUTSTREAM"===t&&(i=new ni({params:e})),"INCONTENT"===t&&(i=new Zt({params:e})),"FLOATING"===t&&(i=new oi({params:e})),"INCONTENT_TO_FLOATING"===t&&(i=new ui({params:e})),i&&(this.videoPlayers[i.uuid]=i)}else this.queued.push({params:e,type:t})}remove({uuid:e}){this.videoPlayers[e]&&(this.videoPlayers[e].remove(),delete this.videoPlayers[e])}async addVideoJS(){[Wn({type:"link",attributes:[{rel:"stylesheet"},{href:"https://vjs.zencdn.net/7.20.2/video-js.css"}]}),Wn({type:"link",attributes:[{rel:"stylesheet"},{href:"https://cdnjs.cloudflare.com/ajax/libs/videojs-contrib-ads/6.9.0/videojs-contrib-ads.css"}]}),Wn({type:"link",attributes:[{rel:"stylesheet"},{href:"https://cdnjs.cloudflare.com/ajax/libs/videojs-ima/1.11.0/videojs.ima.css"}]})].forEach((e=>{document.head.appendChild(e)})),await Kn("https://vjs.zencdn.net/7.20.2/video.min.js"),await Kn("https://imasdk.googleapis.com/js/sdkloader/ima3.js"),await Kn("https://cdnjs.cloudflare.com/ajax/libs/videojs-contrib-ads/6.9.0/videojs-contrib-ads.js"),await Kn("https://cdnjs.cloudflare.com/ajax/libs/videojs-ima/1.11.0/videojs.ima.js"),this.loaded=!0,this.queued&&this.queued.forEach((e=>this.add(e))),function({bidder:e,placementId:t,tagUrl:i}){const n={bidder:xt(e),placementId:t,tagUrl:i};freestar.log({title:"VIDEO"},Xt+`tag loaded for bidder ${e} and placement id ${t}.\nVIDEO MSG OBJECT: ${JSON.stringify(n)}`),ei({eventType:"outstreamTagLoad",args:n})}({bidder:Ct,placementId:"",tagUrl:""})}}let fi=!1;const hi=({params:e})=>{(({params:e,type:t})=>{fi||(fi=new pi),freestar.log(Pt,`Loading ${t} video player...`),fi.add({params:e,type:t})})({params:e,type:"DISPLAY"})};function gi(e){let t={},i=ye({code:e.name,sizes:e.sizes,mediaTypes:null,bids:e.bidders}),s=wi(e);const{battr:r=null}=window.freestar.fsdata.ortb||{};i.ortb2Imp={ext:{data:{fs_ad_product:s}},tagid:e.name,battr:r},e.storedRequestId&&(i.ortb2Imp.ext.prebid={storedrequest:{id:e.storedRequestId}});let a=!1;if(e.sizeMappings.forEach((i=>{!a&&zi()>=i.viewport.size[0]&&(i.mediaTypes.forEach((s=>{var r;void 0===t[s]&&(t[s]={}),void 0===t[s].sizes&&(t[s].sizes=[]),i.size.forEach((e=>{if(e[0]<35843){if(("banner"===s||"native"===s)&&"302x170, 443x250, 554x312, 640x360".includes(`${e[0]}x${e[1]}`))return;t[s].sizes.push(e)}})),t[s].sizes=(r=t[s].sizes,[...new Set(r)]);const a=n.map((e=>e.join("x")));let o=[];const d=Fe(Ui);e.networks&&e.networks.forEach((e=>{(function({network:e,adQualityBlockList:t}){if(function({value:e}){return e&&Array.isArray(e)&&e.length>0}({value:t}))return!t.includes(e.slug);return!0})({network:e,adQualityBlockList:d})&&e.sizes&&e.sizes.forEach((e=>{e.size.forEach((e=>{o.push(e)}))}))}));const l=o.filter((e=>Array.isArray(e))).map((e=>e.join("x"))),c=e.sizes.filter((e=>Array.isArray(e))).map((e=>e.join("x")));if(t[s].sizes=t[s].sizes.filter((e=>{if(-1!==a.indexOf(e.join("x"))||-1!==c.indexOf(e.join("x"))&&-1!==l.indexOf(e.join("x")))return e})),t[s].sizes=t[s].sizes.sort(((e,t)=>e[0]+e[1]<t[0]+t[1]?1:t[0]+t[1]<e[0]+e[1]?-1:0)),"native"===s&&(t[s]=Object.assign(t[s],{type:"image",sendTargetingKeys:!1})),"video"===s){let e=[1,1];t[s].sizes.forEach((t=>{e[0]<t[0]&&(e=t)}));const i=e[0]>=500?[[552,334],[640,360]]:[[300,169],[400,225]];t[s]=Object.assign({},t[s],{api:[2],context:"instream",delivery:2,linearity:2,maxduration:window.freestar.fsdata.adRefreshRate,mimes:["video/mp4","application/javascript","video/webm"],minduration:1,placement:5,playbackmethod:[6],playerSize:i[0],plcmt:4,protocols:[2,3,5,6],size:i,skip:0,useCacheKey:!0,renderer:{render:e=>{hi({params:{bid:e}})},url:"https://a.pub.network/superflex/loader.js"}})}})),a=!0)})),i.mediaTypes=t,!i.bids)return;for(let e=i.bids.length-1;e>=0;e--){if(i.bids[e].dynamicId&&(i.bids[e].params.id=++freestar.dynamicIdNum),i.bids[e].bidder){const t={minViewPort:[0,0],relevantMediaTypes:["banner","native"]},n={minViewPort:[0,0],relevantMediaTypes:["banner","native","video"]};switch(xt(i.bids[e].bidder)){case"zid":i.bids[e].params.adUnitID=Number(i.bids[e].params.adUnitID),i.bids[e].sizeConfig=[t];break;case"appnexus":i.bids[e].params.keywords={fs_ad_product:[s||""]},i.bids[e].sizeConfig=[n];break;case"amazon":i.bids.splice(e,1),i.bids[e].sizeConfig=[t];break;case"onemobile":i.bids[e].params.ext=Object.assign(i.bids[e].params.ext||{},{req:location.href}),i.bids[e].sizeConfig=[t];break;case"ttd":i.bids[e].params.publisherId=freestar.fsdata.companyId,i.bids[e].sizeConfig=[t];break;case"gourmetads":i.bids[e].params.use_pmt_rule&&"true"===i.bids[e].params.use_pmt_rule&&(i.bids[e].params.use_pmt_rule=!0),i.bids[e].params.usePaymentRule&&"true"===i.bids[e].params.usePaymentRule&&(i.bids[e].params.usePaymentRule=!0),i.bids[e].sizeConfig=[t];break;case"resetdigital":bi()||i.bids.splice(e,1);break;case"fsxs2s":case"pubmatic":case"rubicon":case"ix":case"unruly":case"yieldmo":case"openx":case"yahoo":case"mediagrid":i.bids[e].sizeConfig=[n];break;default:i.bids[e].sizeConfig=[t]}}i.bids[e].size?mi(i.bids[e].size[0],i.mediaTypes.banner.sizes)||i.bids.splice(e,1):i.bids[e].params.size&&(mi(i.bids[e].params.size,i.mediaTypes.banner.sizes)||i.bids.splice(e,1))}const o=new It;return o.hasValidStoredRequests()&&!e.ignoreSiteBidders&&i.bids.push(o.addToPlacementAsBidder()),i}function mi(e,t){for(let i=0;i<t.length;i++)if(JSON.stringify(e)===JSON.stringify(t[i]))return!0;return!1}function bi(){const e=window.freestar.locData&&window.freestar.locData.iso||null,t=window.freestar.locData&&window.freestar.locData.state||null;return"US"===e&&!["CA","CO","CT","VA","UT"].includes(t)}function wi(e){let t={};if(!e)return"";const i=["revolvingRail","slidingUnit","topAdhesion","standAloneVideo"].filter((t=>{const i=e[t+"Options"];return i?.active})),n=function(e){const t=e.selectedSize?.elementTargetedConfig;return t&&t.active?{...t,source:"viewport"}:{active:!1}}(e);return n&&n.active&&i.push("dynamicAd"),t=e.stickyFooterOptions,t&&t.active&&i.push(!0===t.video?"stickyFooterVideo":"stickyFooter"),t=e.interstitialOptions,t&&t.active&&i.push("interstitial"),!0===e.lazyAd&&i.push("lazyLoad"),t=e.sideWallOptions,!t||1!==t.type&&2!==t.type||i.push("sideWall"),t=e.pushdownOptions,t&&t.isPushdownUnit&&i.push("pushdown"),i.length<=0&&i.push("banner"),i.filter((e=>!M({name:e}))).join(",")}function yi({slot:e,key:t,value:i}){e&&e.setTargeting&&t&&i&&e.setTargeting(t,i)}function vi(){return window.googletag.pubads&&window.googletag.pubads().getSlots()}function _i({elementId:e}){if(e)return vi().filter((t=>t.getSlotElementId()===e))[0]}function Si({specialDfpId:e,dfpId:t}){return e||!t.includes("{{channel}}")}function Ii({placement:e,sizes:t,id:i=null,specialDfpId:n=null,slotConfig:s}){if(!e)return void freestar.log("No placement provided, exiting...");if(!t&&!(t=mn(e)))return void freestar.log("No sizes found at this resolution, exiting...");i||(i=e.name);let{outOfPage:r,dfpId:a,fluidAd:o}=e,d=_i({elementId:i});if(d||(r?Si({specialDfpId:n,dfpId:a})&&(d=function({dfpId:e,elementId:t}){return window.googletag.defineOutOfPageSlot(e,t).addService(googletag.pubads())}({dfpId:n||a,elementId:i})):(o&&!t.includes("fluid")&&t.push("fluid"),Si({specialDfpId:n,dfpId:a})&&(d=googletag.defineSlot(n||a,t,i).addService(googletag.pubads())))),d){if(freestar.fsdata.disableSingleRequest||googletag.pubads().enableSingleRequest(),googletag.enableServices(),function({id:e,placement:t}){freestar.gamMap[e]||(freestar.gamMap[e]=t.dfpId.indexOf("/15184186/")>-1)}({id:i,placement:e}),d.setTargeting){let t={fsrefresh:"0",fsrebid:"0",fs_uuid:gn()};window.freestar.fsdata.isTriple13Enabled&&(t=vt().getInitialFloorKVP({placement:e,keyMap:t})),Object.keys(t).forEach((e=>{d.setTargeting(e,t[e])}))}if(freestar.gptppid&&freestar.gptppid.updateGoogleSlotTargeting(d),e&&(yi({slot:d,key:"fs_placementName",value:e.name}),yi({slot:d,key:"fs_ad_product",value:wi(e)})),s&&s.targeting)for(const e in s.targeting)Object.prototype.hasOwnProperty.call(s.targeting,e)&&yi({slot:d,key:e,value:s.targeting[e]});const t=localStorage.getItem("brw.prf");return t&&yi({slot:d,key:"browsiPP",value:t}),Ue({slot:d}),O({placementName:e.name,slotId:i,path:n||a}),St.add({placement:e,slot:d}),d}}const Ai="_FOOTER_ONLY";function ki(e){return!0===e?.freestarBrandingDisabled?null:e?.stickyFooterOptions?.active?function(){const{branding:e}=freestar.fsdata;if(e&&"NO_BRANDING"!==e)return e.endsWith(Ai)?e.slice(0,-Ai.length):e;return null}():function(){const{branding:e}=freestar.fsdata;if(e&&"NO_BRANDING"!==e&&!e.endsWith(Ai))return e;return null}()}function Ti(){return"true"===S("fsreportad")||freestar?.fsdata?.adQualityOptions?.confiantReportThisAdEnabled&&ft().allowConfiant()}const Ei=({placement:e,sizes:t})=>{if(!e)return!1;const{pushdownOptions:i,stickyFooterOptions:n,interstitialOptions:s}=e;return!(i?.isPushdownUnit||n?.active||s?.active||fn(t))},xi=({ancillary:e,placement:t})=>{const i=Wn({type:"div",classList:["__fs-branding"]}),n=Ci(t),s=Pi(t);n&&s&&(n.appendChild(s),i.appendChild(n)),e.appendChild(i)},Ci=e=>{try{return Wn({type:"a",attributes:[{href:`https://ads.freestar.com/?utm_campaign=branding&utm_medium=${wi(e)}&utm_source=${window.freestar.fsdata.domain}&utm_content=${e.name}`},{target:"_blank"},{rel:"noreferrer"}]})}catch(e){console.error(e)}},Pi=e=>{try{const t=ki(e);if(!t)return;return Wn({type:"img",src:`https://a.pub.network/core/imgs/fslogo-${t.toLowerCase()}.svg`,attributes:[{alt:"freestar"},{width:"14"},{height:"14"}]})}catch(e){console.error(e)}};function Ri(e,t,i){const n=function(e,t){if(freestar.currentStickyFooter&&freestar.currentStickyFooter.placement){if(freestar.currentStickyFooter.placement.name===t.id)return"sticky-reportThisAd";if(e.pushdownOptions.isPushdownUnit)return"pushdown-reportThisAd"}return null}(t,i),s=i.id,r=Wn({id:`__fs-reportThisAd-${s}`}),a=`btn-${s}`,o=Wn({classList:["report-ad-container",n]}),d=Wn({type:"button",id:a,classList:["report-ad-button"],attributes:[{"aria-label":"Report this ad"}]});d.style.fontSize="12px",d.style.color="black",d.style.textDecoration="none",d.style.cursor="pointer",d.style.background="none",d.style.marginLeft="auto",d.style.marginRight="auto",d.style.display="block",d.style.border="none",d.innerHTML="Report this ad",d.addEventListener("click",(function(e){try{const t=e.target.id.slice(4);window.confiant.services().reportSingleAd(t)}catch(e){alert("Unable to report the ad: "+e.toString())}})),t.stickyFooterOptions&&t.stickyFooterOptions.active&&("mobile"===freestar.deviceInfo.device.type&&("sticky-reportThisAd"===n&&(o.style.top="46px",o.style.right="0px"),d.style.marginTop="5px"),"NO_BRANDING"!==freestar.fsdata.branding&&(d.style.display="none")),o.appendChild(d),r.appendChild(o),e.style.position="relative",e.appendChild(o)}const Bi=({ancillary:e,placement:t,element:i})=>{if(null!==i.querySelector(".report-ad-container"))return;if(!0===t?.adQualityOptions?.disabled||!freestar.fsdata.reportThisAd&&!Ti())return;"CONFIANT"==function(){if(freestar.fsdata.adQualityOptions.vendor)return"desktop"===freestar.deviceInfo.device.type&&freestar.fsdata.adQualityOptions.desktopEnabled||freestar.fsdata.adQualityOptions.mobileEnabled?freestar.fsdata.adQualityOptions.vendor:null;switch(freestar.deviceInfo.device.type){case"desktop":return freestar.fsdata.adQualityDesktopVendor;case"mobile":return freestar.fsdata.adQualityMobileVendor;default:return null}}()&&freestar?.fsdata?.adQualityOptions?.confiantReportThisAdEnabled&&ft().allowConfiant()&&Ri(e,t,i)};function Di(e){const{element:t,target:i,targetIFrame:n,placement:s}=e;t&&i&&n&&s?n.addEventListener("load",(()=>{n.offsetWidth<=1||n.offsetHeight<=1?freestar.log(20,"not applying ancillary, targetIFrame is too small",n):(e.element.classList.contains("_fs-sf-ad")||function({element:e,target:t,targetIFrame:i,placement:n}){if(!ki(n))return void freestar.log(20,"not applying branding, feature not active for placement",e.id,n);const s=n.sizes.sort().reverse();if(!isNaN(s[0][0])&&!Ei({placement:n,sizes:s}))return void freestar.log(20,"not applying report-this-ad based on sizes or non-standard product type",e.id,s,n);const r=Oi(t);r.querySelector(".__fs-branding")?freestar.log(20,"Not applying branding, already exists!",e.id):(freestar.log(20,"applying branding",e.id),xi({ancillary:r,placement:n}));qi(e,i,r,s)}(e),function({element:e,target:t,targetIFrame:i,placement:n}){if(!Ti())return void freestar.log(20,"not applying report-this-ad, feature not active");const{stickyFooterOptions:s}=n,r=n.sizes.sort().reverse();if(!isNaN(r[0][0])&&!Ei({placement:n,sizes:r})&&!s.active)return void freestar.log(20,"not applying report-this-ad based on sizes or non-standard product type",e.id,r,n);const a=s.active?t:Oi(t);freestar.log(20,"applying report-this-ad",e.id),Bi({ancillary:a,placement:n,element:e}),s.active||qi(e,i,a,r)}(e))}),{once:!0}):freestar.log(20,"not applying ancillary, missing attribute",{element:t,target:i,targetIFrame:n,placement:s})}function Oi(e){let t=e.querySelector(".__fs-ancillary");return t||(t=Wn({type:"div",classList:["__fs-ancillary"]}),e.appendChild(t)),t}const Li={},Mi=10;function qi(e,t,i,n){freestar.log(20,"setting ancillary style timeout",e.id),clearTimeout(Li[e.id]);const s=t.width<=1?1500:Mi;Li[e.id]=setTimeout((()=>{freestar.log(20,"ancillary style timeout fired",e.id),i.style.setProperty("--childWidth",function(e,t){if(t<2)return"fluid"===e[0]?"100%":e[0][0]+"px";const i=Number(t);return isNaN(i)&&t.includes("%")?t:`${i}px`}(n,t.width||"300")),i.style.setProperty("visibility","visible")}),s)}const Ni=new class{constructor(){}getHighestBid(e){const t=fsprebid.getBidResponsesForAdUnitCode(e);if(t.bids&&t.bids.length>0){const e=t.bids.filter((e=>"rendered"!==e.status));if(e.length>0)return e.sort(((e,t)=>t.cpm-e.cpm)),e[0]}return null}getAdUnit(e){return window.freestar.adUnitManager.getAdUnitBySlotElementId({elementId:e})}async renderAmazonAd(e,t,i=null,n=null){const s=this.getAdUnit(t);if(!s||s?.renderMap?.[e.amzniid])return;if(s.renderMap[e.amzniid]=!0,s&&s.placement){if(s.placement.stickyFooterOptions.active){const e=new CustomEvent("nativeRenderStickyFooter",{detail:{elementId:t}});document.dispatchEvent(e)}s.placement.pushdownOptions.isPushdownUnit&&freestar.pushdownControl&&freestar.pushdownControl.applyControlsToNativeRender()}await this.clearExistingAd(t),s.setNativeRenderStatus(!0);const{slot:r}=s;r.setTargeting("isAmazonNativeRender","true");const a=this.createAdElement(e);document.getElementById(t).appendChild(a),this.executeRenderAmazonAd(e.amzniid),this.applyAncillary(t),n&&"function"==typeof n&&n({adUnit:s,data:i})}async renderAd(e,t,i=null,n=null){const s=this.getAdUnit(t);if(!s||s?.renderMap?.[e.adId])return;if(s.renderMap[e.adId]=!0,s&&s.placement){if(s.placement.stickyFooterOptions.active){const i=new CustomEvent("nativeRenderStickyFooter",{detail:{elementId:t,height:e.height+4}});document.dispatchEvent(i)}s.placement.pushdownOptions.isPushdownUnit&&freestar.pushdownControl&&freestar.pushdownControl.applyControlsToNativeRender()}await this.clearExistingAd(t),s.setNativeRenderStatus(!0);const r=this.createAdElement(e);document.getElementById(t).appendChild(r),this.executeRenderAd(e.adId),this.applyAncillary(t),n&&"function"==typeof n&&n({adUnit:s,data:i})}applyAncillary(e){return Di(function(e,t=!1){const i=document.getElementById(e);if(!i)return{element:null,target:null,targetIFrame:null,placement:null};let n=null,s=null;t?(s=i.querySelector('iframe[id*="_fs-ad-"]'),n=s?i:null):(n=i.querySelector('div[id*="google_ads_iframe_"]'),s=n?.querySelector("iframe"));const r=!!i&&bn({name:i.getAttribute("name")||i.parentNode.getAttribute("name")});return{element:i,target:n,targetIFrame:s,placement:r}}(e,!0)),e}clearExistingAd(e){return new Promise((t=>{const i=document.getElementById(e);if(!i)return;const n=i.querySelector("iframe");n&&n.remove();i.querySelectorAll('div[id*="google_ads_iframe"]').forEach((e=>e.remove())),t()}))}createElement(e){const{type:t,id:i,attributes:n}=e;let s=document.createElement(t);return s.id=i,n.forEach((e=>{"style"===e.key?s.style.cssText=e.value:s.setAttribute(e.key,e.value)})),s}createAdElement(e){return this.createElement({type:"iframe",id:`_fs-ad-${e.adId||e.amzniid}`,attributes:[{key:"width",value:e.width||"100%"},{key:"height",value:e.height||"100%"},{key:"frameBorder",value:"0"},{key:"marginHeight",value:"0"},{key:"marginWidth",value:"0"},{key:"scrolling",value:"no"},{key:"style",value:`width:${e.width+"px"||"100%"}; height:${e.height+"px"||"100%"}; overflow: hidden;`}]})}executeRenderAmazonAd(e){try{apstag.renderImp(document.querySelector(`#_fs-ad-${e}`).contentWindow.document,e),freestar.log(1,`rendered #_fs-ad-${e} natively`)}catch(t){freestar.log(1,`unable to render #_fs-ad-${e} natively`)}}executeRenderAd(e){fsprebid.renderAd(document.querySelector(`#_fs-ad-${e}`).contentWindow.document,e),freestar.log(1,`rendered #_fs-ad-${e} natively`)}enqueueMessage(e,t){let i,n=JSON.parse(JSON.stringify(e));delete n.ad,i={eventType:"NATIVE_RENDER",jsonValue:JSON.stringify({elementId:t,winningBid:n})},freestar.msg.que.push(i)}};window.freestar&&window.freestar.queue&&window.freestar.queue.push((()=>{window.freestar.nativeRenderManager=Ni}));const ji={"scribd-com":{clientId:"ca-pub-1211639399720391",sizes:{"300x100":6475080870,"300x250":7125817567,"300x50":1716797968,"320x100":9052362509,"320x50":4499654227,"336x280":4367012037,"468x60":5113117491,"728x90":7843222610,"970x250":5105378639,"970x90":6338569255}}},$i=()=>freestar?.config?.adsense||ji[o()];new class{constructor(){this.params=!1,this.init()}init(){this.params=$i()}render(e=null,t=null,i=!1){if(!$i())return;this.params||(this.params=$i()),window.adsbygoogle||(Jn("https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"),window.adsbygoogle=[]);const n=St.getAdUnitByPrebidCode({code:e}),{placement:s}=n,r=(({placement:e,sizesAllowed:t=!1})=>{let{sizes:i}=e;return i=i.filter((e=>Array.isArray(e))),Array.isArray(t)&&(i=i.filter((e=>-1!==t.indexOf(e.join("x"))))),i.sort(((e,t)=>t[0]+t[1]-(e[0]+e[1])))[0]})({placement:s,sizesAllowed:Object.keys(this.params.sizes)});document.getElementById(e).innerHTML=`<ins class="adsbygoogle"\n            style="display:block; width:${r[0]}px; height:${r[1]}px;"\n            data-ad-client="${this.params.clientId}"\n            data-ad-slot="${this.params.sizes[r.join("x")]}"\n        ></ins>`,window.adsbygoogle.push({}),i&&"function"==typeof i&&i({adUnit:n,data:t})}};const Ui={key:"fs.exclude.bidders",type:ze.array.type};function zi(){return window.innerWidth&&document.documentElement.clientWidth?Math.min(window.innerWidth,document.documentElement.clientWidth):window.innerWidth||document.documentElement.clientWidth||document.getElementsByTagName("body")[0].clientWidth}function Fi(){return freestar.fsdata.placements}function Vi(e){return!(!e.validAdSizes||!e.bidders||0===e.bidders.length||e.stickyFooter||e.dynamicAd)&&function(e){return void 0===freestar.config||void 0===freestar.config.enabled_slots||function(e,t){for(let i=0;i<e.length;i++)if(e[i].placementName===t){if("complete"!==document.readyState)return!0;if(window.document.getElementById(t))return!0}return!1}(freestar.config.enabled_slots,e.name)}(e)}const Gi=({adUnitPath:e})=>window.freestar.fsdata.placements.find((t=>e===t.dfpId));function Hi(e){const{name:t,detail:i}=e,n=new CustomEvent(t,{detail:i});window.dispatchEvent(n)}var Wi=Qe.getInstanceFn({ClassConstructor:class{constructor(){this.isReportingActive=Fe({key:h})||100*Math.random()<1,window.freestar=window.freestar||{},window.freestar.performanceMarksData=window.freestar.performanceMarksData||{pendingMarks:[],processedMarks:[]},this.isFirstLoad=this.getIsFirstLoad()}resetPerformanceLogger(){sessionStorage.removeItem("hasLoadedBefore"),window.freestar.performanceMarksData={pendingMarks:[],processedMarks:[]}}fetchPerformanceMarkDetails({markerName:e,compareToData:t}){const i=performance.getEntriesByName(e,"mark");if(0===i.length)return null;let n;t&&(n=performance.getEntriesByName(t,"mark"));const s=i[0];return{marker_name:s.name,absolute_time:s.startTime.toFixed(2),...this.compareMarks({mark:s,compareToPerformanceMarkData:n})}}compareMarks({mark:e,compareToPerformanceMarkData:t}){if(!t)return{};const i=(e.startTime-t[0].startTime).toFixed(2);return{compared_to:t[0].name,relative_Time:i}}fetchUserDetails(){const{deviceInfo:e,locData:t}=window.freestar,{browser:i,os:n,device:s}=e;return{...t,browser_name:i.name,browser_version:i.version,os_name:n.name,os_version:n.version,device_type:s.type}}getIsFirstLoad(){return null===sessionStorage.getItem("hasLoadedBefore")&&(sessionStorage.setItem("hasLoadedBefore","true"),!0)}sendPerformanceMarkerToQueue({markerName:e,compareTo:t}){if(this.isReportingActive&&!window.freestar.performanceMarksData.processedMarks.includes(e))if(window.freestar.performanceMarksData.processedMarks.push(e),0===t.length){const t=this.fetchPerformanceMarkDetails({markerName:e}),i=this.fetchUserDetails();window.freestar&&window.freestar.msg&&window.freestar.msg.que&&window.freestar.msg.que.push({eventType:"customEvent",args:{eventType:"PERFORMANCE",jsonValue:JSON.stringify({...t,...i,is_first_load:this.isFirstLoad,pubfig_version:window.freestar.version}),eventName:e.toUpperCase()}})}else t.forEach((t=>{const i=this.fetchPerformanceMarkDetails({markerName:e,compareToData:t}),n=this.fetchUserDetails();window.freestar&&window.freestar.msg&&window.freestar.msg.que&&freestar.msg.que.push({eventType:"customEvent",args:{eventType:"PERFORMANCE",jsonValue:JSON.stringify({...i,...n,is_first_load:this.isFirstLoad,pubfig_version:window.freestar.version}),eventName:e.toUpperCase()}})}))}pushAllPendingMarksToMsgQue(){window.freestar.performanceMarksData.pendingMarks.forEach((e=>{this.sendPerformanceMarkerToQueue(e)}))}logMark({markerName:e,compareTo:t=[],isFreestarDataCollectorInitialized:i=!0}){performance.mark(e),i&&window.freestar.deviceInfo&&window.freestar.locData?this.sendPerformanceMarkerToQueue({markerName:e,compareTo:t}):window.freestar.performanceMarksData.pendingMarks.push({markerName:e,compareTo:t})}logPerformanceMarkers(){const e=performance.getEntriesByType("mark");for(const t of e)console.log(`Mark [${t.name}]: ${t.startTime.toFixed(2)}ms`)}},instanceName:"performanceLogger"});function Ji(e){return e.bidders&&e.bidders.some((({bidder:e})=>"amazon"===e))}function Ki(e){let t=Fi();for(let i=0;i<t.length;i++)if(t[i].dfpId===e)return t[i];return null}function Qi(e){let t=[];if(e)for(let i=0;i<e.length;i++){let n=null;try{n=freestar.dynamicSlotLibrary[e[i].getSlotElementId()],n&&(n=bn({name:n})),n||(n=freestar.fsdata.placements.filter((t=>{if(e[i].getSlotElementId()===t.slotId)return t})),0===n.length&&(n=null)),n||(n=Ki(e[i].getAdUnitPath()))}catch(e){freestar.log(1,`Error: ${e}`)}if(n&&Ji(n)){const n=e[i],s=n.getSizes().filter((e=>"string"!=typeof e)).map((e=>[e.width,e.height]));if(!s.length)return;const r={slotID:n.getSlotElementId(),slotName:n.getAdUnitPath(),sizes:s};t.push(ye(r))}}else t=Fi().filter((e=>Ji(e)&&Vi(e))).map((e=>function(e){const t=e.sizeMappings.find((e=>zi()>=e.viewport.size[0]));let i=t?t.size:[];return i=i.filter((e=>35843!==e[0])),ye({slotID:e.name,slotName:e.dfpId,sizes:i})}(e)));return t}function Yi(e,t,i,n){if(!(e=function({elementIds:e}){return e&&e.length?(Array.isArray(e)||(e=[e]),!(!e||!e.length)&&e):freestar.fsdata.placements.map((e=>{if(e.validAdSizes&&!e.stickyFooter&&!e.pushdownUnit&&0===e.sideWallType&&document.getElementById(e.name))return e.name})).filter((e=>void 0!==e))}({elementIds:e}))||!e.length)return;Hi({name:"auctionStarted",detail:!0}),Wi().logMark({markerName:y.pubfigPrebidFsRequestBids});const s=i||window.freestar.fsdata.timeout,r={prebid:!1,aps:!1,adserverRequestSent:!1};freestar.requestReference.bidTimer=null,freestar.requestReference.requestNum=++freestar.bidRequestNum;let a=[];const o=ft().isGAMEnabled(),d=freestar.amazonNetwork;function l(e){freestar.debug&&freestar.debug>24&&"prebid"===e&&setTimeout((()=>{(()=>{const e=fsprebid.getBidResponses(),t=fsprebid.getAllWinningBids(),i=[];Object.keys(e).forEach((function(n){e[n].bids.forEach((function(e){i.push({bid:e,adunit:n,adId:e.adId,bidder:e.bidder,time:e.timeToRespond,dims:`${e.width}x${e.height}`,cpm:e.cpm,msg:e.status,rendered:!!t.find((function(t){return t.adId==e.adId}))})}))}))})()}),1500),freestar.log(1,`(${freestar.requestReference.requestNum}) Bidder back:`,e),r.prebid&&(!o||r.aps)&&o&&p()}function c(e){let t,i,n=!0;const s=fsprebid.getBidResponses()[e.domId],r=bn({name:L({slotId:e.placementName})});return s&&r?(i=function(e,t){const i=Math.max(...e.map(t));return e.find((e=>t(e)===i))}(s.bids,(function(e){return Number(e.cpm)})),t=r[`floor${freestar.deviceInfo.device.type.charAt(0).toUpperCase()+freestar.deviceInfo.device.type.slice(1)}`],"number"==typeof t&&t>0&&i&&i.cpm&&i.cpm<t&&(n=!1),n):n}function u(e){return freestar.dynamicSlotLibrary[e]?freestar.dynamicSlotLibrary[e]:e}function p(){!0!==r.adserverRequestSent&&(r.adserverRequestSent=!0,freestar.requestReference.bidTimer&&clearTimeout(freestar.requestReference.bidTimer),freestar.log(2," ("+freestar.requestReference.requestNum+") Sending adserver request!"),googletag.cmd.push((function(){const t={activeIds:[],activeSlots:[]};if(Array.isArray(e)&&e.length){const i=[];freestar.log(2," ("+freestar.requestReference.requestNum+") Refresh Only:",e),freestar.amazonNetwork&&apstag.setDisplayBids(e),e.forEach((e=>{let t=document.getElementById(e);if(t){const e=bn({name:L({slotId:t.getAttribute("name")})});e&&i.push(e.name)}}));const n=function(){const t={activeIds:[],activeSlots:[]};return e.forEach((e=>{const i=_i({elementId:e});i&&t.activeSlots.push(i),c({placementName:u(e),domId:e})&&t.activeIds.push(e)})),t}();t.activeIds=n.activeIds,t.activeSlots=n.activeSlots}else freestar.log(2," ("+freestar.requestReference.requestNum+") Refresh All!"),freestar.amazonNetwork&&apstag.setDisplayBids(),t.activeIds=function(){const e=[];return vi().forEach((t=>{const i=t.getSlotElementId();freestar.bidsWon&&freestar.bidsWon[i]&&!freestar.bidsWon[i]&&(freestar.bidsWon[i].evaluated=!0,c({placementName:u(i),domId:i})&&e.push(i))})),e}();const i=function(){let e=A({name:"_fs-test"});return e&&(e=JSON.parse(e),e.items.some(((t,i)=>{t==e.selection&&(e.selected=i,e.testGroup=t.indexOf("ab_test")>-1?1:0)}))),e}();i&&(freestar.log(1,"Part of an A/B test... ",i),function({key:e,value:t}){window.googletag.pubads&&window.googletag.pubads().setTargeting(e,t)}({key:"fs_test_variant_id",value:String(i.testGroup)})),t.activeSlots.length&&(t.activeIds.length&&fsprebid.setTargetingForGPTAsync(t.activeIds),function(e){if(freestar.debug<50)return;freestar.log(25,"GPT Targeting - START ************************");let t=googletag.pubads().getTargetingKeys();for(let e=0;e<t.length;e++){let i=googletag.pubads().getTargeting(t[e]);freestar.log(25,"GPT Targeting - "+t[e]+" = "+i)}e?Array.isArray(e)||(e=[e]):e=vi();for(let i=0;i<e.length;i++){let n=e[i],s=n.getSlotElementId();t=n.getTargetingKeys();for(let e=0;e<t.length;e++){let i=n.getTargeting(t[e]);freestar.log(25," GPT Targeting - Slot ("+s+")- "+t[e]+" = "+i)}}freestar.log(25," GPT Targeting - END **************************")}(t.activeSlots),function(e){!0===freestar.googletagCorrelatorUpdate?(googletag.pubads().refresh(e),freestar.googletagCorrelatorUpdate=!1):googletag.pubads().refresh(e,{changeCorrelator:!1})}(t.activeSlots)),n&&n()})))}o&&(a=Qi(t)),freestar?.config?.setNonPersonalizedAds?(freestar.log(1," ("+freestar.requestReference.requestNum+") set to skip pre auctions, sending GAM request."),p()):(!function(e,t,i){o&&function({amazonSlots:e,bidTimeout:t,requestManager:i}){if(!o||!d||!e.length)return freestar.log(1,"Amazon bidding is not applicable or no valid amazon Slots"),i.aps=!0,void l("aps");freestar.log(1,"Requesting bids from Amazon:",e),apstag.fetchBids({slots:e,timeout:t||1e3},(function(e){freestar.log(1," ("+freestar.requestReference.requestNum+") aps bids:",e),i.aps=!0,l("aps")}))}({amazonSlots:e,bidTimeout:i,requestManager:r}),function({elementIds:e,bidTimeout:t,requestManager:i}){const n={timeout:t||1e3,bidsBackHandler:function(e){freestar.log(1," ("+freestar.requestReference.requestNum+") prebid bid responses:",e),i.prebid=!0,l("prebid")}};e&&(n.adUnitCodes=e),fsprebid.que.push((function(){fsprebid.requestBids(n)}))}({elementIds:t,bidTimeout:i,requestManager:r})}(a,e,s),freestar.requestReference.bidTimer=window.setTimeout((function(){o&&(freestar.log(1," ("+freestar.requestReference.requestNum+") TIMEOUT!"),function({adUnitCodesWithNoBids:e,isTimeout:t}){vi().forEach((i=>{if(t)i.setTargeting("fsbid","timeout");else if(e){const t=i.getAdUnitPath(),n=Gi({adUnitPath:t});n&&e.indexOf(n.name)>-1&&i.setTargeting("fsbid","0")}}))}({isTimeout:!0}),p())}),s))}function Zi({adUnits:e,isRefresh:t=!1}){Array.isArray(e)||(e=[e]),e=function(e,t){const i=[];return e.forEach((e=>{const n=(gt(e.code)||0)+(t?1:0),s=ft().getConfig({refresh:n});s&&"off"===s.preGAMAuction||i.push(function(e,t){const i=_i({elementId:e.code});i&&t?.clientServerMask&&!ft().isDebugOrTestSession()&&i.setTargeting("fs_clientservermask",t.clientServerMask);return function(e,t){t||(t={});const i=[];return(e.bids||[]).forEach((function(e){const n=xt(e.bidder);if(t[n]){if("off"!==t[n]){const s="both"===ft().getBidderSummary()[n]&&"client"===t[n];i.push({...e,bidder:s?Et(n):n})}}else i.push({...e})})),{...e,bids:i}}(e,t?.clientServer)}(e,s))})),i}(e,t);const i=e.filter((e=>e&&null!=e.bids&&e.bids.length>0)),n=e.filter((e=>!e||null==e.bids||0===e.bids.length));if(n.length>0){const e=n.map((e=>e&&e.code)).join(", ");freestar.log(20,`Not adding adUnits ${e} which have no bidders configured.`)}freestar.log(20,`Adding ${i.length} adUnits to fsprebid.`),fsprebid.que.push((function(){fsprebid.addAdUnits(i)})),i.forEach((e=>{St.add({prebid:e})}))}const Xi="SUPERFLEX V3.1.1",en={title:Xi,styles:"background: black; color: white; border-radius: 3px; padding: 3px"},tn={level:99,title:Xi,styles:"background: lightblue; color: black; border-radius: 3px; padding: 3px"},nn=[[468,60],[320,50],[320,100],[300,250],[300,50],[300,100]],sn=[[970,250],[970,90],[728,90],[336,280],[300,600]],rn=["onemobile","teads"];const an=new class{constructor(){this.logs=new U}update({placements:e}){this.placements=e.filter((e=>{let t=!0;if(e.sizeMappings.forEach((e=>{e.size.forEach((e=>{hn(e)&&(t=!1)}))})),t)return e})),this.active=0!==e.length||!M({name:"superflex"});const{blocklist:t=[]}=JSON.parse(Fe({key:"fs.superflex"}))||{};this.blocklist=t}checkLineItems(e){e.needed.filter((e=>"TRAFFICKED"===e.demandSourceType||"DIRECT"===e.demandSourceType)).forEach((e=>{e.slots.filter((e=>this.placements.some((t=>t.name===e))&&!this.blocklist.includes(e))).forEach((e=>{this.blocklist.push(e),Ve({key:"fs.superflex",value:{blocklist:this.blocklist},type:ze.object})}))}))}getIframeSize(e){if(!e)return{width:1,height:1};if(e.contentDocument&&e.contentDocument.body){const{clientWidth:t,clientHeight:i}=e.contentDocument.body;if(t>1&&i>1)return{width:t,height:i}}return e.getBoundingClientRect()}getLargestPossibleDimensions({placement:e}){let{sizes:t}=e;return t=t.filter((e=>Array.isArray(e))),[t.sort(((e,t)=>t[0]-e[0]))[0][0],t.sort(((e,t)=>t[1]-e[1]))[0][1]]}getPlacementsNames(){return this.placements?this.placements.map((e=>e.name)):[]}getValidBids({bids:e}){return Array.isArray(e)&&0!==e.length?e.filter((e=>"superflex"!==e.bidderCode&&!rn.includes(e.bidderCode)&&(!e.status||"rendered"!==e.status&&"targetingSet"!==e.status)&&this.isValidBidSize({size:e.size}))).sort(((e,t)=>t.cpm-e.cpm||t.width-e.width||t.height-e.height)):[]}getLargestBidBySize({bids:e}){return 0===e.length?[]:e.sort(((e,t)=>t.width-e.width||t.height-e.height))[0]}isValidBidSize({size:e}){return nn.map((e=>e.join("x"))).includes(e)}isViewportSuperflex(e){let t=0;for(let i=0;i<e.length;i++){let n=e[i];n.viewport.size[0]>t&&zi()>=n.viewport.size[0]&&(t=n.viewport.size[0])}return!!e.find((e=>e.viewport.size[0]===t)).superflex}isSuperflex({placement:e}){return!(!e||!this.getPlacementsNames().includes(e.name))&&!!(e&&e.sizeMappings&&this.isViewportSuperflex(e.sizeMappings))}removeCSS({placement:e}){const t=document.getElementById(`_fs-sf-${e.name}-stylesheet`);t&&t.remove()}refresh({elementId:e,placement:t}){const i=document.getElementById(e);i&&(i.innerHTML=""),document.getElementById(`_fs-sf-${i.className.split("fs-sf-")[1]}-stylesheet`)&&document.getElementById(`_fs-sf-${i.className.split("fs-sf-")[1]}-stylesheet`).remove(),i.className.split(" ").forEach((e=>{-1!==e.indexOf("fs-sf")&&i.classList.remove(e)}));const n=gn(),s=freestar.refreshLibrary[e];s&&(freestar.refreshLibrary[e]=s,freestar.refreshLibrary[e].timesRefreshed+=1),freestar.newAdSlots([{slotId:e,placementName:t.name,targeting:{"fs-sf-uuid":n,fsrefresh:freestar.refreshLibrary[t.name]?freestar.refreshLibrary[t.name].timesRefreshed:0}}])}getNumberOfPossibleAdditionalAds({remainingSpace:e=null,largestPossibleDimension:t,adDimensions:i,targetDimension:n}){const s="width"===n?0:1;let r=Math.floor(e/i[s]);if("height"===n){const e=sn.sort(((e,t)=>e[1]-t[1])).reverse().find((e=>e[1]<=t[s]));250===e[s]&&(i[s]>=50&&i[s]<100&&r>2&&(r=2),i[s]>=100&&r>1&&(r=1)),280===e[s]&&(i[s]>=50&&i[s]<100&&r>2&&(r=2),i[s]>=100&&r>1&&(r=1)),600===e[s]&&(i[s]>=50&&i[s]<250&&r>3&&(r=3),i[s]>=250&&r>1&&(r=1))}return r}auctionEndCallback(e){const{adUnits:t}=e;t.forEach((e=>{const{code:t}=e;if(-1!==e.code.indexOf("_fs-sf-"))return;if(-1!==e.code.indexOf("browsi"))return;if(!(e=St.getAdUnitByPrebidCode({code:t})))return this.logs.add(`Prebid Auction End Event for ${t}`),this.logs.add("Adunit not found"),void this.logs.show(en);const{placement:i,prebid:n,slot:s}=e;if(!this.isSuperflex({placement:i}))return;if(this.logs.add(`Prebid Auction End Event for ${t}`),this.logs.add("Placement is Superflex"),!1===this.shouldRun({placement:i}))return this.logs.add(`There is an active sponsorship for ${i.name}`),void this.logs.show(en);const r=n.bids.filter((e=>-1!==rn.indexOf(e.bidder)));if(0!==r.length)return this.logs.add(`Placement contains invalid bidder(s): ${[...new Set(r.map((e=>e.bidder)))].join(", ")}`),void this.logs.show(en);let a=fsprebid.getBidResponsesForAdUnitCode(t);if(0===a.bids.length)return this.logs.add("Did not receive any bids"),void this.logs.show(en);a=a.bids,this.logs.add(`Received ${a.length} bid(s)`);const o=this.getValidBids({bids:a});if(0===o.length)return this.logs.add("Did not receive any valid bids"),void this.logs.show(en);this.logs.add(`Received ${o.length} valid bid(s)`);const d=o[0],l=this.getLargestBidBySize({bids:a});if(d.adId===l.adId)return this.logs.add("topValidBidByCPM is the same ad as topBidBySize"),void this.logs.show(en);if(d.width===l.width&&d.height===l.height)return this.logs.add("topValidBidByCPM is the same dimensions as topBidBySize"),void this.logs.show(en);this.logs.add(`topValidBidByCPM: ${d.adId} $${d.cpm} (${d.width}x${d.height})`),this.logs.add(`topBidBySize: ${l.adId} $${l.cpm} (${l.width}x${l.height})`);const c=this.getLargestPossibleDimensions({placement:i}),u=c[0]>c[1]?"width":"height",p=c["width"===u?0:1]-d[u];if(p<d[u])return this.logs.add(`There is not enough space (${p}px) left to render additional ads`),void this.logs.show(en);this.logs.add(`There is ${p}px of space remaining`);const f=this.getNumberOfPossibleAdditionalAds({remainingSpace:p,largestPossibleDimension:c,adDimensions:[d.width,d.height],targetDimension:u});if(f<1)return;if(this.logs.add(`There is space for ${f} more ad(s)`),l.cpm>=d.cpm*(f+1))return this.logs.add(`topBidBySize CPM is greater than the combined potential CPM of ${f+1} ${d.width}x${d.height} ads ($${l.cpm} vs. $${d.cpm*(f+1)})`),void this.logs.show(en);this.logs.add(`topBidBySize CPM is less than the combined potential CPM of ${f+1} ${d.width}x${d.height} ads ($${l.cpm} vs. $${d.cpm*(f+1)})`);const h=s.getTargeting("fs-sf-uuid")[0]||gn(),g=Wn({type:"div",id:`_fs-sf-${h}-0`,attributes:[{name:i.name}]}),m=document.getElementById(s.getSlotElementId());m.classList.add(`fs-sf-${h}`);const b=Wn({type:"style",id:`_fs-sf-${h}-stylesheet`});b.textContent+=`\n                    .fs-sf-${h} {\n                        display: flex !important;\n                        align-items: center !important;\n                        justify-content: space-evenly !important;\n                    }\n                    .fs-sf-${h} .__fs-ancillary {\n                        max-width: ${d.width}px;\n                    }\n                `,"width"===u&&(b.textContent+=`\n                        .fs-sf-${h} {\n                            width: ${c[0]}px !important;\n                            flex-direction: row !important;\n                            margin: 0 auto;\n                        }\n                    `),"height"===u&&(b.textContent+=`\n                        .fs-sf-${h} {\n                            height: ${c[1]}px !important;\n                            flex-direction: column;\n                        }\n                    `),m.innerHTML="",m.appendChild(g),googletag.destroySlots([s]),fsprebid.removeAdUnit(n.code),a.forEach((e=>{e.adId!==d.adId&&(e.adUnitCode=gn())}));const w=Ii({placement:i,sizes:[d.width,d.height],id:g.id,slotConfig:{targeting:Object.assign(fsprebid.getAdserverTargetingForAdUnitCode(n.code),{"fs-sf-uuid":h,"fs-sf-index":"0",fsrefresh:freestar.refreshLibrary[i.name]?freestar.refreshLibrary[i.name].timesRefreshed:0})}});this.logs.add(`Created an ad for topValidBidByCPM ${g.id}`);const y=[],v=[];for(let e=1;e<=f;e++){const t=Wn({type:"div",id:`_fs-sf-${h}-${e}`,classList:["_fs-sf-ad"],attributes:[{name:i.name}]});m.appendChild(t),y.push(Ii({placement:i,sizes:[d.width,d.height],id:t.id,slotConfig:{targeting:{"fs-sf-uuid":h,"fs-sf-index":`${e}`,fsrefresh:freestar.refreshLibrary[i.name]?freestar.refreshLibrary[i.name].timesRefreshed:0}}}));const n=ye(i);n.name=`_fs-sf-${h}-${e}`,n.sizes=[[d.width,d.height]],n.sizeMappings=n.sizeMappings.map((e=>(e.size=[[d.width,d.height]],e))),n.bidders=n.bidders.filter((e=>-1===rn.indexOf(e.bidder)));const s=gi(n);s.mediaTypes.banner.sizes=[[d.width,d.height]],v.push(s),b.textContent+=`\n                    #_fs-sf-${h}-${e}:not(:has(.__fs-ancillary)) {\n                        padding-bottom: 17px;\n                    }\n                `,this.logs.add(`Created an additional ad ${t.id}`)}if(document.head.appendChild(b),googletag.pubads().refresh([w]),Zi({adUnits:v}),Yi(v.map((e=>e.code)),y),!freestar.refreshLibrary[s.getSlotElementId()]){const e=setTimeout((()=>{clearTimeout(e),freestar.refreshLibraryCreator(s.getSlotElementId())}),1e3)}this.logs.show(tn)}))}slotRequestedCallback(e){const{slot:t}=e;if(-1!==t.getSlotElementId().indexOf("_fs-sf-"))return;const i=St.getAdUnitBySlotElementId({elementId:t.getSlotElementId()});if(!i)return;const{placement:n}=i;if(this.isSuperflex({placement:n})&&0===t.getTargeting("fs-sf-uuid").length){const e=gn();t.setTargeting("fs-sf-uuid",e)}}waitForIFrameElm(e){const t=setTimeout((()=>{clearTimeout(t),this.slotRenderEndedCallback(e)}),250)}slotRenderEndedCallback(e){const{slot:t}=e;if(-1!==t.getSlotElementId().indexOf("_fs-sf-"))return;if(-1!==t.getSlotElementId().indexOf("browsi"))return;const i=St.getAdUnitBySlotElementId({elementId:t.getSlotElementId()});if(!i)return this.logs.add(`Slot Render Ended Event for ${t.getSlotElementId()}`),this.logs.add("Adunit not found"),void this.logs.show(en);const{placement:n}=i;if(!this.isSuperflex({placement:n}))return;if(this.logs.add(`Slot Render Ended Event for ${n.name}`),!1===this.shouldRun({placement:n}))return this.logs.add(`There is an active sponsorship for ${n.name}`),void this.logs.show(en);const{enabledSuperflexBlocklist:s,gamSuperflexBlocklist:r}=freestar.fsdata;if(s){if(!["advertiserId","lineItemId","creativeId","campaignId"].every((t=>-1===r.indexOf(e[t]))))return this.logs.add("Slot contains matching entry on blocklist, exiting"),void this.logs.show(en)}const a=document.getElementById(t.getSlotElementId());if(!a)return this.logs.add("Element not found, exiting"),void this.logs.show(en);const o=a.querySelector('div[id*="google_ads_iframe_"]');if(!o)return this.logs.add("Element not found, exiting"),void this.logs.show(en);if(o.classList.contains("_fs-sf-ad"))return;this.logs.add("Placement is Superflex");const d=this.getLargestPossibleDimensions({placement:n});this.logs.add(`Largest possible size is ${d[0]}x${d[1]}`);const l=d[0]-d[1]>100?"width":"height",c=a.querySelector('iframe[id*="google_ads_iframe_"]'),u=this.getIframeSize(c);if(u.width<=1||u.height<=1)return this.logs.add("Element size not found, exiting"),void this.logs.show(en);u.width>300&&u.width<320&&(u.width=300),u.width>320&&u.width<468&&(u.width=320),u.width>468&&u.width<728&&(u.width=468),u.width>728&&u.width<970&&(u.width=970),u.height>50&&u.height<60&&(u.height=50),u.height>60&&u.height<90&&(u.height=60),u.height>90&&u.height<100&&(u.height=90),u.height>100&&u.height<250&&(u.height=100),u.height>250&&u.height<600&&(u.height=250),u.height>600&&(u.height=600),this.logs.add(`Size of ad rendered is ${u.width}x${u.height}`);const p=d["width"===l?0:1]-u[l];if(p<c[l])return this.logs.add(`There is not enough space (${p}px) left to render additional ads`),void this.logs.show(en);this.logs.add(`There is ${p}px of space remaining`);const f=this.getNumberOfPossibleAdditionalAds({remainingSpace:p,largestPossibleDimension:d,adDimensions:[u.width,u.height],targetDimension:l});if(f<1)return;this.logs.add(`There is space for ${f} more ad(s)`);const h=t.getTargeting("fs-sf-uuid")[0];a.classList.add(`fs-sf-${h}`);const g=Wn({type:"style",id:`_fs-sf-${h}-stylesheet`});"width"===l&&(g.textContent+=`\n                .fs-sf-${h} {\n                    width: ${d[0]}px;\n                    display: flex;\n                    align-items: center !important;\n                    justify-content: space-evenly !important;\n                    flex-direction: row !important;\n                    flex-wrap: nowrap;\n                    margin: 0 auto;\n                }\n                .fs-sf-${h}>div[id*="google_ads_iframe_"] {\n                    width: ${u.width}px;\n                    height: auto !important;\n                }\n            `),"height"===l&&(g.textContent+=`\n                .fs-sf-${h} {\n                    height: ${d[1]}px;\n                    display: flex;\n                    align-items: center;\n                    justify-content: space-evenly;\n                    flex-direction: column;\n                }\n            `);const m=[],b=[];for(let e=1;e<=f;e++){const t=Wn({type:"div",id:`_fs-sf-${h}-${e}`,classList:["_fs-sf-ad"],attributes:[{name:n.name}]});a.appendChild(t),b.push(Ii({placement:n,sizes:[[u.width,u.height]],id:t.id,slotConfig:{targeting:{"fs-sf-uuid":h,"fs-sf-index":`${e}`,fsrefresh:freestar.refreshLibrary[n.name]?freestar.refreshLibrary[n.name].timesRefreshed:0}}}));const i=JSON.parse(JSON.stringify(n));i.name=`_fs-sf-${h}-${e}`,i.sizes=[[u.width,u.height]],i.sizeMappings=i.sizeMappings.map((e=>(e.size=[[u.width,u.height]],e))),i.bidders=i.bidders.filter((e=>-1===rn.indexOf(e.bidder)));const s=gi(i);s.mediaTypes.banner.sizes=[[u.width,u.height]],m.push(s),g.textContent+=`\n                #_fs-sf-${h}-${e}:not(:has(.__fs-ancillary)) {\n                    padding-bottom: 17px;\n                }\n            `,"width"===l&&(g.textContent+=`\n                    #_fs-sf-${h}-${e}>div[id*="google_ads_iframe_"] {\n                        width: ${u.width}px;\n                    }\n                `),this.logs.add(`Created an additional ad ${t.id}`)}document.head.appendChild(g),Zi({adUnits:m}),Yi(m.map((e=>e.code)),b),this.logs.show(tn)}shouldRun({placement:e}){return-1===this.blocklist.indexOf(e.name)}registerSuperflexCallbacks(){const e=!S("sfv3-gam-only"),t=!S("sfv3-prebid-only");e&&fsprebid.onEvent("auctionEnd",this.auctionEndCallback.bind(this)),googletag.pubads().addEventListener("slotRequested",this.slotRequestedCallback.bind(this)),t&&googletag.pubads().addEventListener("slotRenderEnded",this.waitForIFrameElm.bind(this))}};let on;window.freestar.superflexManager=an;const dn=new Uint8Array(16);function ln(){if(!on&&(on="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!on))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return on(dn)}const cn=[];for(let e=0;e<256;++e)cn.push((e+256).toString(16).slice(1));var un={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function pn(e,t,i){if(un.randomUUID&&!t&&!e)return un.randomUUID();const n=(e=e||{}).random||(e.rng||ln)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){i=i||0;for(let e=0;e<16;++e)t[i+e]=n[e];return t}return function(e,t=0){return cn[e[t+0]]+cn[e[t+1]]+cn[e[t+2]]+cn[e[t+3]]+"-"+cn[e[t+4]]+cn[e[t+5]]+"-"+cn[e[t+6]]+cn[e[t+7]]+"-"+cn[e[t+8]]+cn[e[t+9]]+"-"+cn[e[t+10]]+cn[e[t+11]]+cn[e[t+12]]+cn[e[t+13]]+cn[e[t+14]]+cn[e[t+15]]}(n)}const fn=e=>1===e.length&&1===e[0][0]&&1===e[0][1],hn=e=>Array.isArray(e)&&e.length>1&&35843===e[0],gn=()=>pn();function mn(e){let t=!1;return e.sizeMappings.some((e=>{if(zi()>=e.viewport.size[0])return t=e.size.sort(((e,t)=>e[0]+e[1]<t[0]+t[1]?1:t[0]+t[1]<e[0]+e[1]?-1:0)).filter((e=>35843!==e[0])),!0})),t}const bn=({name:e})=>window.freestar.fsdata.placements.filter((t=>t.name===e))[0],wn=[2,7,9,10],yn=["tcloaded","useractioncomplete"];function vn(e,t,n){const s=["4735792","38893584"],r=n.fsdata?.disallowedGeos?.includes(n.locData.iso);if(!e&&t){if(function(){const e=i,t=e.length;let n=!1;if(freestar.locData&&freestar.locData.iso)for(let i=0,s=t;i<s;i++){const t=e[i];if(freestar.fsdata.siteId===t.siteId&&t.restrictedCountries.indexOf(freestar.locData.iso)>-1){n=!0;break}}return n}())throw new Error("Ad serving is blocked in "+n.locData.iso);r||n.fsdata.placements.some((e=>s.some((t=>e.dfpId&&e.dfpId.includes(t)))))&&(!function(){let e=kn({queue:[]},freestar);freestar.queue={push:function(e){googletag.cmd.push(e)}};for(let t=0;t<e.queue.length;t++)freestar.queue.push(e.queue[t])}(),n.newAdSlots=_n,n.deleteAdSlots=Sn,n.refresh=In,n.trackPageview=An,n.config.enabled_slots.length&&(googletag.cmd.push((function(){googletag.pubads().setTargeting("fspbg","freestar")})),_n(n.config.enabled_slots)))}}function _n(e,t){const i=function(e,t){const i="function"==typeof t?t:e=>e[t];return[...e.reduce(((e,t)=>{const n=null==t?t:i(t);return e.has(n)||e.set(n,t),e}),new Map).values()]}(e=e.filter((e=>void 0!==bn({name:e.placementName}))),"slotId");!t&&freestar.config.channel&&(t=freestar.config.channel),freestar.config.orignalChannel||(freestar.config.orignalChannel="{{channel}}"),t&&freestar.config.orignalChannel!==t&&(freestar.fsdata.placements=freestar.fsdata.placements.map((e=>(e.dfpId=e.dfpId.replace(freestar.config.orignalChannel,t),e))),freestar.config.orignalChannel=t),i.forEach((function(e){const{placementName:t,slotId:i,targeting:n}=e,s=document.getElementById(i),r=bn({name:t}),a=mn(r);s&&s.id&&r&&a&&googletag.cmd.push((function(){const e=googletag.defineSlot(r.dfpId,a,r.name).addService(googletag.pubads());n&&Object.keys(n).forEach((t=>{e.setTargeting(t,n[t])})),googletag.pubads().enableSingleRequest(),googletag.enableServices(),googletag.display(s.id),googletag.pubads().refresh([e])}))}))}function Sn(e){void 0!==e?(Array.isArray(e)||(e=[e]),e.forEach((e=>{let t=_i({elementId:e});t&&googletag.destroySlots([t])}))):googletag.cmd.push((function(){googletag.destroySlots()}))}function In(){}function An(){}function kn(){let e={},t=!1,i=0,n=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(t=arguments[0],i++);let s=function(i){for(let n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t&&"[object Object]"===Object.prototype.toString.call(i[n])?e[n]=kn(!0,e[n],i[n]):e[n]=i[n])};for(;i<n;i++)s(arguments[i]);return e}const Tn=["tcloaded","useractioncomplete"];let En=!1,xn=0;const Cn=e=>{const t={gdpr:!1,usp:{uspString:"1---"}};E()?(e=>{R()?window.__uspapi("getUSPData",1,((t,i)=>i&&t.uspString?e(t.uspString):e(null))):e(null)})((i=>{i&&(t.usp={uspString:i}),e(t)})):x()?(e=>{C()?window.__tcfapi("getTCData",2,((t,i)=>i&&t.tcString?e(t.tcString):e(null))):e(null)})((i=>{i&&(t.gdpr={tcString:i}),e(t)})):e(t)};const Pn=function({data:e}){const{eventStatus:t}=e;if(Tn.includes(t)){const{purpose:t,vendor:i}=e,n=t?t.consents:void 0,s=i?i.consents:void 0;return function({consents:e}){freestar.consentManagement.consentData={consents:{1:e?e[1]:void 0,10:e?e[10]:void 0}}}({consents:n}),function(e,...t){return!(!e||!t)&&t.every((t=>!!e[t]))}(n,1,10)&&function(e,...t){return!(!e||!t)&&t.every((t=>!!e[t]))}(s,850)}};function Rn({isTCF:e}){if(void 0===freestar.fsdata.comscore||!1!==freestar.fsdata.comscore){window._comscore=window._comscore||[];const t={c1:"2",c2:"23384447"};e||(t.cs_ucfr=""),_comscore.push(t),Jn("https://sb.scorecardresearch.com/beacon.js")}}const Bn=function(e,t){if("cmpuishown"===e.eventStatus)return;const i=Pn({data:e}),n=function({data:e}){const{eventStatus:t}=e;if(yn.includes(t)){const{purpose:t}=e,i=t?.legitimateInterests;return function(e,t){return!(!e||!t?.length)&&t.every((t=>e[t]))}(i,wn)}}({data:e});Rn({isTCF:!0}),t?!En&&i&&(En=!0,Qn()):freestar.log(1,"Error: TCF Callback Failed"),n&&vn(i,n,window.freestar)},Dn=function(){return xn++,50===xn?(clearTimeout(freestar.timers.tcfapi),freestar.timers.tcfapi=null,void Rn({isTCF:!1})):xn<50&&!window.__tcfapi?(freestar.timers||(freestar.timers={}),void(freestar.timers.tcfapi=setTimeout(Dn,500))):(freestar.timers&&freestar.timers.tcfapi&&(clearTimeout(freestar.timers.tcfapi),freestar.timers.tcfapi=null),void window.__tcfapi("addEventListener",2,Bn))};const On="FREESTAR",Ln="FS_SOURCEPOINT_PUBFIG",Mn=(e,t)=>{const i=e===Ln,n=e===On,s=Boolean(window.__tcfapi),r=Boolean(window.__uspapi),a=E(t)&&!r,o=x(t)&&!s;i&&(a||o)?P(t):n&&(a||o)&&function(){const e=freestar.fsdata.quantcastDomain;if(e){var t="https://cmp.inmobi.com".concat("/choice/","wZt3yQfgdwnz-","/",e,"/choice.js?tag_version=V2"),i=0;Jn(t),function(){for(var e,t="__tcfapiLocator",i=[],n=window;n;){try{if(n.frames[t]){e=n;break}}catch(e){}if(n===window.top)break;n=n.parent}e||(function e(){var i=n.document,s=!!n.frames[t];if(!s)if(i.body){var r=i.createElement("iframe");r.style.cssText="display:none",r.name=t,i.body.appendChild(r)}else setTimeout(e,5);return!s}(),n.__tcfapi=function(){var e,t=arguments;if(!t.length)return i;if("setGdprApplies"===t[0])t.length>3&&2===t[2]&&"boolean"==typeof t[3]&&(e=t[3],"function"==typeof t[2]&&t[2]("set",!0));else if("ping"===t[0]){var n={gdprApplies:e,cmpLoaded:!1,cmpStatus:"stub"};"function"==typeof t[2]&&t[2](n)}else"init"===t[0]&&"object"==typeof t[3]&&(t[3]=Object.assign(t[3],{tag_version:"V2"})),i.push(t)},n.addEventListener("message",(function(e){var t="string"==typeof e.data,i={};try{i=t?JSON.parse(e.data):e.data}catch(e){}var n=i.__tcfapiCall;n&&window.__tcfapi(n.command,n.version,(function(i,s){var r={__tcfapiReturn:{returnValue:i,success:s,callId:n.callId}};t&&(r=JSON.stringify(r)),e&&e.source&&e.source.postMessage&&e.source.postMessage(r,"*")}),n.parameter)}),!1))}();var n=function(){var e=arguments;typeof window.__uspapi!==n&&setTimeout((function(){void 0!==window.__uspapi&&window.__uspapi.apply(window.__uspapi,e)}),500)};if(void 0===window.__uspapi){window.__uspapi=n;var s=setInterval((function(){i++,window.__uspapi===n&&i<3?console.warn("USP is not accessible"):clearInterval(s)}),6e3)}}else freestar.log(10,"loadQuantcast","Could not get quantcastDomain from fsdata, quantcast will not be loaded!")}(),function(e,t,i){const n=t||i;window.fsCmpInitMessage={eventType:"customEvent",args:{eventName:"PRIVACY_COMPLIANCE",eventType:`SITE_HAS_CMP=${n}`,jsonValue:JSON.stringify({cmpType:e,tcfapi:t,uspapi:i})}}}(e,s,r)},qn={current:"current",fsLoadPubfigUrlparams:"fsLoadPubfigUrlparams"},Nn="fs-playwright-tests-script",jn="fs-ab-tests-script",$n="fsaltconfig",Un="fs-qa";class zn{constructor(){window._pubfigInstanceManagerConfig=window._pubfigInstanceManagerConfig||{},this.config=window._pubfigInstanceManagerConfig,this.fsLoadPubfigVersionUrlParams=S("fsLoadPubfigVersion")||"",this.fsAltConfigUrlParams=S("fsaltconfig"),this.isQA=S("fsdebug")}setEngineLocation(e){Object.values(qn).includes(e)&&(this.config.engineLocation=e)}getEngineLocation(){return this.config.engineLocation===qn.fsLoadPubfigUrlparams?`https://a.pub.network/core/pubfig/${this.fsLoadPubfigVersionUrlParams}/pubfig.engine.js`:"https://a.pub.network/core/pubfig/5.84.9/pubfig.engine.js"}checkForAlternativeInstances({isTest:e,performanceLogger:t}={isTest:"",performanceLogger:{resetPerformanceLogger:()=>{}}}){if(this.fsLoadPubfigVersionUrlParams&&!this.config.loadPubfigVersionRedirect)return this.config.loadPubfigVersionRedirect=!0,this.setEngineLocation(qn.fsLoadPubfigUrlparams),t.resetPerformanceLogger(),Hn({id:Nn,src:`https://a.pub.network/core/pubfig/${this.fsLoadPubfigVersionUrlParams}/pubfig.min.js`,errorString:"PLAYWRIGHTS TEST FOUND - exiting after creating new instance..."});if(e&&e.length)return t.resetPerformanceLogger(),this.setEngineLocation(qn.current),window.freestar.redirected=!0,Hn({id:jn,src:e,errorString:"AB TEST FOUND - exiting after creating new instance..."});const i=[].slice.call(document.querySelectorAll(`script#${$n}`));if(this.fsAltConfigUrlParams&&0===i.length)return t.resetPerformanceLogger(),this.setEngineLocation(qn.current),Hn({id:$n,src:`https://a.pub.network/${o()}/test/${this.fsAltConfigUrlParams}/pubfig.min.js?bypass=true`,errorString:"Alternate Configuration - found alt version, exiting after creating new instance..."});if(this.isQA&&!this.config.fsQaRedirect){let e;if(this.config.fsQaRedirect=!0,document.querySelectorAll("script").forEach((t=>{t.innerText.includes("qa/pubfig")&&(e=!0)})),!e)return t.resetPerformanceLogger(),this.setEngineLocation(qn.current),Hn({id:Un,src:`https://a.pub.network/${o()}/qa/pubfig.min.js`,errorString:"QA version called via params - exiting after creating new instance..."})}}}let Fn=null;function Vn(){return Fn||(Fn=new zn),Fn}function Gn(){if("object"!=typeof window.freestar.fsdata)throw new Error("The fsdata object is not properly defined, exiting...");if(window.freestar.fsdata.onlyAllowedDomains&&window.freestar.fsdata.allowedDomains&&window.freestar.fsdata.allowedDomains.length&&!function({domains:e}){let t=0===e.length;return e.forEach((e=>{0===e.indexOf("*.")&&(e=e.slice(2)),t||(t=-1!==top.location.host.indexOf(e))})),!(!t&&fsdata.onlyAllowedDomains)}({domains:window.freestar.fsdata.allowedDomains}))throw new Error("The current domain is not in the allowed domains list, exiting...");if(window.freestar.fsdata.urlBlocklist&&window.freestar.fsdata.urlBlocklist.length&&function(e){const t=/^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9](?:\.[a-zA-Z]{2,})+$/,i=e=>{try{return new URL(e),!0}catch(e){return!1}},n=e=>{const i=e.split("/");return t.test(i[0])},{href:s,pathname:r,host:a,search:o}=top.location,d=(e,t)=>e.includes("/*")?s.includes(e.replace("/*","")):t,l=e=>"/"===e[e.length-1]?e.substring(0,e.length-1):e;return e.find((e=>i(e)?d(e,l(s)===l(e)):n(e)?d(e,l(a+r+o)===l(e)):r.includes(e)))}(window.freestar.fsdata.urlBlocklist))throw new Error("The current domain is in the blocked url list, exiting...")}function Hn({id:e,src:t,errorString:i}){const n=Wn({type:"script",id:e,src:t});throw window.freestar.fsdata=null,document.head.appendChild(n),new Error(i)}function Wn({type:e="div",classList:t=[],id:i=!1,src:n=!1,name:s=!1,attributes:r=[],children:a=[]}){const o=document.createElement(e);return t.length&&(o.className=t.join(" ")),n&&(o.src=n),i&&(o.id=i),s&&o.setAttribute("name",s),r.length&&r.forEach((e=>{const t=Object.keys(e)[0];o.setAttribute(t,e[t])})),a.length&&a.forEach((e=>{o.appendChild(e)})),o}function Jn(e,t,i=null,n,s=!0){try{const r=Wn({type:"script",attributes:[{"data-owner":"freestar"}]});e&&(r.src=e),n&&(r.textContent=n),i&&(r.id=i),s&&(r.async=s),r.type="text/javascript",t&&r.addEventListener("load",t,{once:!0}),document.getElementsByTagName("head")[0].appendChild(r)}catch(e){}}const Kn=(e,t=null,i)=>new Promise((n=>{Jn(e,n,t,i,!0)}));function Qn(){if(Wi().logMark({markerName:y.pubfigEngineLoadInit}),freestar.modulesLoaded.engine)return freestar.log(0,"========== ENGINE ALREADY LOADED =========="),!1;let e=window.fsprebid||{};window.fsprebid=e,e.que=e.que||[],e.retries=0;if(freestar.fsdata.disallowedGeos&&freestar.fsdata.disallowedGeos.length&&freestar.fsdata.disallowedGeos.includes(freestar.locData.iso))freestar.log(0,"Ad serving is blocked in "+freestar.locData.iso);else{if(freestar.modulesLoaded.engine)return freestar.log(0,"========== ENGINE ALREADY LOADED =========="),!1;Jn(Vn().getEngineLocation(),Yn),freestar.pubfigState.configReady=!0,Hi({name:"pubfigRunEngine",detail:!0})}}function Yn(){freestar.globalUnderscore&&(window._=freestar.globalUnderscore)}function Zn(e){Math.random()<.01&&freestar.msg.que.push({eventType:"customEvent",args:{eventName:"PUBFIG_NOT_LOADED",eventType:e||"",jsonValue:JSON.stringify({domain:window.location.hostname})}})}function Xn(){!function(){if(window.freestar.config.disabledProducts)for(const e in window.freestar.config.disabledProducts)Object.prototype.hasOwnProperty.call(window.freestar.config.disabledProducts,e)&&(void 0===window.freestar.config.products[e]?console.error(`Freestar product name: ${e} does not exist.`):window.freestar.config.products[e].disabled=window.freestar.config.disabledProducts[e])}(),s.indexOf(freestar.locData.iso)>-1?Dn():(freestar.log(0,"Outside GDPR Zone"),Qn())}const es=20,ts="adRefreshRate",is="visibilityRefreshTime";function ns(e,t){if(e.refreshOptIn&&function(e){return!(!e||null==e.turboActive)&&e.turboActive}(t)){const i=function(e){return e&&e.percentReduction}(t);freestar.log(20,`TURBO MODE active! Applying ${i}% reduction to refresh rates!`);const n=(e,t)=>function(e,t,i,n){if(null==e||Number.isNaN(e)||e<=0)return freestar.log(20,`TURBO: ${n} refreshRate ${e} unchanged`),e;let s=Math.floor(e*(100-t)/100);return(null==s||Number.isNaN(s)||s<i)&&(s=i),freestar.log(20,`TURBO: ${n} ${e} has been updated to ${s}`),s}(e,i,es,t);Object.prototype.hasOwnProperty.call(e,ts)&&(e[ts]=n(e[ts],ts)),Object.prototype.hasOwnProperty.call(e,is)&&(e[is]=n(e[is],is))}}const ss="fs.config";function rs({data:e,dataPath:t}){const i=function(e,t,i){if(!t)return;const n=(Array.isArray(t)?t:t.match(/([^[.\]])+/g)).reduce(((e,t)=>e&&e[t]),e);return void 0===n?i:n}(e,t);if(i)return"location"===t?{iso:i.countryCode,city:i.cityName,state:i.state}:i}async function as({callback:e}){const t=await fetch(`https://a.pub.network/${o()}/fsdata.json`);if(!t.ok){const e=`No data returned from fsdata fallback endpoint: ${t.status}`;throw new Error(e)}const i=await t.json();i?(window.freestar.fsdata=i,window.freestar.locData=!1,window.freestar.networkMap=!1,e(null,!0)):e({error:"No data returned from fsdata endpoint"})}function os(){const e=window.location.search.includes("fsdebug"),t=S("fsaltconfig"),i=S("fstesturl"),n={env:"PROD",version:!1};return e?(n.env="QA",T({isActive:!0})):t&&t>0&&(n.env="TEST",n.version=t),i.length&&freestar.queue.push((function(){googletag.pubads().set("page_url",i)})),n}function ds({pubfigSettings:e}){const{abTest:t}=e;if(t&&!window.freestar.redirected){const{testGroup:i,testId:n,testType:s,testVariantId:r}=t;if(`${i}`.length&&Ve({key:f,value:`${i}`,type:ze.string}),n&&Ve({key:h,value:n,type:ze.string}),r&&Ve({key:m,value:r,type:ze.string}),s&&(Ve({key:g,value:s,type:ze.string}),"PUBFIG_TEMPLATE"===s&&e.pubfigLocation))return Ve({key:b,value:e.pubfigLocation,type:ze.string}),e.pubfigLocation}return!1}window.freestar=window.freestar||{},freestar.queue=freestar.queue||[];const ls=[{owner:"google",ua:"googlebot"},{owner:"google",ua:"mediapartners-google"},{owner:"google",ua:"adsbot-google"},{owner:"bing",ua:"bingbot"},{owner:"yahoo",ua:"slurp"},{owner:"duckduckgo",ua:"duckduckbot"},{owner:"baidu",ua:"baiduspider"},{owner:"yandex",ua:"yandexbot"},{owner:"exabot",ua:"konqueror/3.5"},{owner:"exabot",ua:"Exabot/3.0"},{owner:"facebook",ua:"facebot"},{owner:"facebook",ua:"facebookexternalhit/1.0"},{owner:"facebook",ua:"facebookexternalhit/1.1"},{owner:"alexa",ua:"ia_archiver"}];async function cs(){!function(){let e=window.freestar||{};window.freestar=e,e.log=j,e.msg={},sessionStorage.setItem("fs.session",JSON.stringify({id:pn()}))}(),await as({callback:()=>{Jn(`https://a.pub.network/core/analytics/${e.builds.analytics}/analytics.min.js`,(()=>{window.freestar.analytics.track({type:"customEvent",args:{eventName:"BOT_DETECTED",eventType:"botDetected",jsonValue:JSON.stringify({detected:!0})}})}))}})}function us(e,t){throw cs(),I({botCookieName:e,value:!0}),`pubfig code disabled as the user agent ${t} is a bot`}const ps=()=>{!function(){let e;e=window.googletag||{},e.cmd=e.cmd||[],window.googletag=e,e.cmd.push((()=>{const t=Fe({key:f});t&&e.pubads().setTargeting("tg",t),e.pubads().setTargeting("fs_session_id",freestar.msg.sessionId),e.pubads().setTargeting("fs_pageview_id",freestar.msg.pageId)}))}(),window.googletag&&!window.googletag.apiReady&&Jn("https://securepubads.g.doubleclick.net/tag/js/gpt.js")};var fs={exports:{}};var hs,gs={exports:{}},ms=xe(Object.freeze({__proto__:null,default:{}}));function bs(){return hs||(hs=1,function(e,t){var i;e.exports=(i=i||function(e,t){var i;if("undefined"!=typeof window&&window.crypto&&(i=window.crypto),"undefined"!=typeof self&&self.crypto&&(i=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(i=globalThis.crypto),!i&&"undefined"!=typeof window&&window.msCrypto&&(i=window.msCrypto),!i&&void 0!==Te&&Te.crypto&&(i=Te.crypto),!i)try{i=ms}catch(e){}var n=function(){if(i){if("function"==typeof i.getRandomValues)try{return i.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof i.randomBytes)try{return i.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},s=Object.create||function(){function e(){}return function(t){var i;return e.prototype=t,i=new e,e.prototype=null,i}}(),r={},a=r.lib={},o=a.Base={extend:function(e){var t=s(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},d=a.WordArray=o.extend({init:function(e,i){e=this.words=e||[],this.sigBytes=i!=t?i:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,i=e.words,n=this.sigBytes,s=e.sigBytes;if(this.clamp(),n%4)for(var r=0;r<s;r++){var a=i[r>>>2]>>>24-r%4*8&255;t[n+r>>>2]|=a<<24-(n+r)%4*8}else for(var o=0;o<s;o+=4)t[n+o>>>2]=i[o>>>2];return this.sigBytes+=s,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-i%4*8,t.length=e.ceil(i/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],i=0;i<e;i+=4)t.push(n());return new d.init(t,e)}}),l=r.enc={},c=l.Hex={stringify:function(e){for(var t=e.words,i=e.sigBytes,n=[],s=0;s<i;s++){var r=t[s>>>2]>>>24-s%4*8&255;n.push((r>>>4).toString(16)),n.push((15&r).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n+=2)i[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new d.init(i,t/2)}},u=l.Latin1={stringify:function(e){for(var t=e.words,i=e.sigBytes,n=[],s=0;s<i;s++){var r=t[s>>>2]>>>24-s%4*8&255;n.push(String.fromCharCode(r))}return n.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n++)i[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new d.init(i,t)}},p=l.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},f=a.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=p.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i,n=this._data,s=n.words,r=n.sigBytes,a=this.blockSize,o=r/(4*a),l=(o=t?e.ceil(o):e.max((0|o)-this._minBufferSize,0))*a,c=e.min(4*l,r);if(l){for(var u=0;u<l;u+=a)this._doProcessBlock(s,u);i=s.splice(0,l),n.sigBytes-=c}return new d.init(i,c)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});a.Hasher=f.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,i){return new e.init(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return new h.HMAC.init(e,i).finalize(t)}}});var h=r.algo={};return r}(Math),i)}(gs)),gs.exports}!function(e,t){var i;e.exports=(i=bs(),function(e){var t=i,n=t.lib,s=n.WordArray,r=n.Hasher,a=t.algo,o=[];!function(){for(var t=0;t<64;t++)o[t]=4294967296*e.abs(e.sin(t+1))|0}();var d=a.MD5=r.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var i=0;i<16;i++){var n=t+i,s=e[n];e[n]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}var r=this._hash.words,a=e[t+0],d=e[t+1],f=e[t+2],h=e[t+3],g=e[t+4],m=e[t+5],b=e[t+6],w=e[t+7],y=e[t+8],v=e[t+9],_=e[t+10],S=e[t+11],I=e[t+12],A=e[t+13],k=e[t+14],T=e[t+15],E=r[0],x=r[1],C=r[2],P=r[3];E=l(E,x,C,P,a,7,o[0]),P=l(P,E,x,C,d,12,o[1]),C=l(C,P,E,x,f,17,o[2]),x=l(x,C,P,E,h,22,o[3]),E=l(E,x,C,P,g,7,o[4]),P=l(P,E,x,C,m,12,o[5]),C=l(C,P,E,x,b,17,o[6]),x=l(x,C,P,E,w,22,o[7]),E=l(E,x,C,P,y,7,o[8]),P=l(P,E,x,C,v,12,o[9]),C=l(C,P,E,x,_,17,o[10]),x=l(x,C,P,E,S,22,o[11]),E=l(E,x,C,P,I,7,o[12]),P=l(P,E,x,C,A,12,o[13]),C=l(C,P,E,x,k,17,o[14]),E=c(E,x=l(x,C,P,E,T,22,o[15]),C,P,d,5,o[16]),P=c(P,E,x,C,b,9,o[17]),C=c(C,P,E,x,S,14,o[18]),x=c(x,C,P,E,a,20,o[19]),E=c(E,x,C,P,m,5,o[20]),P=c(P,E,x,C,_,9,o[21]),C=c(C,P,E,x,T,14,o[22]),x=c(x,C,P,E,g,20,o[23]),E=c(E,x,C,P,v,5,o[24]),P=c(P,E,x,C,k,9,o[25]),C=c(C,P,E,x,h,14,o[26]),x=c(x,C,P,E,y,20,o[27]),E=c(E,x,C,P,A,5,o[28]),P=c(P,E,x,C,f,9,o[29]),C=c(C,P,E,x,w,14,o[30]),E=u(E,x=c(x,C,P,E,I,20,o[31]),C,P,m,4,o[32]),P=u(P,E,x,C,y,11,o[33]),C=u(C,P,E,x,S,16,o[34]),x=u(x,C,P,E,k,23,o[35]),E=u(E,x,C,P,d,4,o[36]),P=u(P,E,x,C,g,11,o[37]),C=u(C,P,E,x,w,16,o[38]),x=u(x,C,P,E,_,23,o[39]),E=u(E,x,C,P,A,4,o[40]),P=u(P,E,x,C,a,11,o[41]),C=u(C,P,E,x,h,16,o[42]),x=u(x,C,P,E,b,23,o[43]),E=u(E,x,C,P,v,4,o[44]),P=u(P,E,x,C,I,11,o[45]),C=u(C,P,E,x,T,16,o[46]),E=p(E,x=u(x,C,P,E,f,23,o[47]),C,P,a,6,o[48]),P=p(P,E,x,C,w,10,o[49]),C=p(C,P,E,x,k,15,o[50]),x=p(x,C,P,E,m,21,o[51]),E=p(E,x,C,P,I,6,o[52]),P=p(P,E,x,C,h,10,o[53]),C=p(C,P,E,x,_,15,o[54]),x=p(x,C,P,E,d,21,o[55]),E=p(E,x,C,P,y,6,o[56]),P=p(P,E,x,C,T,10,o[57]),C=p(C,P,E,x,b,15,o[58]),x=p(x,C,P,E,A,21,o[59]),E=p(E,x,C,P,g,6,o[60]),P=p(P,E,x,C,S,10,o[61]),C=p(C,P,E,x,f,15,o[62]),x=p(x,C,P,E,v,21,o[63]),r[0]=r[0]+E|0,r[1]=r[1]+x|0,r[2]=r[2]+C|0,r[3]=r[3]+P|0},_doFinalize:function(){var t=this._data,i=t.words,n=8*this._nDataBytes,s=8*t.sigBytes;i[s>>>5]|=128<<24-s%32;var r=e.floor(n/4294967296),a=n;i[15+(s+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),i[14+(s+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),t.sigBytes=4*(i.length+1),this._process();for(var o=this._hash,d=o.words,l=0;l<4;l++){var c=d[l];d[l]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}return o},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});function l(e,t,i,n,s,r,a){var o=e+(t&i|~t&n)+s+a;return(o<<r|o>>>32-r)+t}function c(e,t,i,n,s,r,a){var o=e+(t&n|i&~n)+s+a;return(o<<r|o>>>32-r)+t}function u(e,t,i,n,s,r,a){var o=e+(t^i^n)+s+a;return(o<<r|o>>>32-r)+t}function p(e,t,i,n,s,r,a){var o=e+(i^(t|~n))+s+a;return(o<<r|o>>>32-r)+t}t.MD5=r._createHelper(d),t.HmacMD5=r._createHmacHelper(d)}(Math),i.MD5)}(fs);var ws=Ee(fs.exports);const ys="fs.session";const vs=new class{constructor(){this.session=null,this.init()}init(){let e=Fe({key:ys});this.session=e?JSON.parse(e):{},this.session.id||(this.session.id=gn());let t=["utm_source","utm_medium","utm_campaign","utm_term","utm_content"].map((e=>({key:e,value:S(e)}))).filter((e=>""!==e.value));if(0!==t.length){let e={};t.forEach((t=>{e[t.key]=t.value})),this.session.utm=e}Ve({key:ys,type:ze.object,value:this.session})}getSessionId(){return this.session.id}getUTMValue(e){return this.session.utm?this.session.utm[e]:null}};function _s(){if(freestar.fsdata&&freestar.fsdata.hashEnabled){const e=A({name:"fs.identifier.hash"});return window.location.hash=e&&e.length?e:function(){const e=function(){let e=(new Date).getTime();return window.performance&&"function"==typeof window.performance.now&&(e+=performance.now()),"xxxxxxxxxx".replace(/[x]/g,(function(){let t=(e+16*Math.random())%16|0;return e=Math.floor(e/16),t.toString(16)}))}();return I({name:"fs.identifier.hash",value:e,expires:1825,path:"/"}),e}(),window.location.hash}return""}function Ss(){freestar.msg=freestar.msg||{},freestar.msg.que=freestar.msg.que||[],freestar.msg.pageId=ws(window.location.href+freestar.hitTime+freestar.msg.fpc).toString(),freestar.msg.processing=freestar.msg.processing||!1,freestar.msg.round=freestar.msg.round||0,freestar.msg.loadTime=freestar.msg.loadTime||0,freestar.msg.hash=_s(),freestar.msg.sessionId=vs.getSessionId(),window.fsCmpInitMessage&&(freestar.msg.que.push(window.fsCmpInitMessage),freestar.log(10,window.fsCmpInitMessage.args.eventName,window.fsCmpInitMessage.args.eventType,window.fsCmpInitMessage.args.jsonValue),delete window.fsCmpInitMessage)}Wi().logMark({markerName:y.pubfigLoaded,isFreestarDataCollectorInitialized:!1});const Is=new URLSearchParams(window.location.search);!function(){if(S("fsdisable"))throw new Error("pubfig disabled.")}();if(function(e){const t="fs.bot.found",i=A({name:t});i&&!0===Boolean(i)?us(t,e):e&&!i&&(ls.forEach((i=>{RegExp(i.ua.toLowerCase()).test(e.toLowerCase())&&us(t,e)})),freestar.queue.push((function(){I({name:t,value:!1})})))}(navigator.userAgent||window.navigator.userAgent),function(){let e=window.freestar||{};window.freestar=e,e.log=j,e.disableAutoTrackPageviews=e.disableAutoTrackPageviews||!1,e.version="5.84.9",e.buildProcessId="",e.hitTime=e.hitTime||Date.now(),e.queue=e.queue||[],e.config=e.config||{},e.pubfigState={configReady:!1},e.config.products=e.config.products?qe(a,e.config.products):a,e.config.enabled_slots=e.config.enabled_slots||[],e.modulesLoaded=e.modulesLoaded||{engine:!1,messaging:!1,pubfig:!1,prebid:!1},e.msg={},e.msg.collectorURL=window.freestarUrl||"https://c.pub.network",e.msg.dispensaryURL=window.dispensaryUrl||t,e.consentManagement={consentData:{}},e.newAdSlots=function(t,i=null){e.loaded||Zn("newAdSlots"),e.queue.push((function(){e.newAdSlots(t,i)}))},e.deleteAdSlots=function(t){e.loaded||Zn("deleteAdSlots"),e.queue.push((function(){e.deleteAdSlots(t)}))},e.newStickyFooter=function(t){e.loaded||Zn("newStickyFooter"),e.queue.push((function(){e.newStickyFooter(t)}))},e.newSidewall=function(t){e.loaded||Zn("newSidewall"),e.queue.push((function(){e.newSidewall(t)}))},e.newVideo=function(t){e.loaded||Zn("newVideo"),e.queue.push((function(){e.newVideo(t)}))},e.newPushdown=function(t){e.loaded||Zn("newPushdown"),e.queue.push((function(){e.newPushdown(t)}))},e.newStandAlonePlayer=function(t){e.loaded||Zn("newStandAlonePlayer"),e.queue.push((function(){e.newStandAlonePlayer(t)}))},e.deleteStandAlonePlayer=function(t){e.loaded||Zn("deleteStandAlonePlayer"),e.queue.push((function(){e.deleteStandAlonePlayer(t)}))}}(),it.initManager(),!freestar.modulesLoaded.pubfig){let e=!1;const t=window.performance.getEntriesByType("navigation");t.length>0&&t[0].loadEventEnd>0&&(e=!0),window.addEventListener("load",(function(){e=!0})),Is.get("fsLoadPubfigVersion")&&(window.freestar.pubfigVersionToLoad=Is.get("fsLoadPubfigVersion")),Vn().checkForAlternativeInstances({isTest:!1,performanceLogger:Wi()}),Wi().logMark({markerName:y.pubfigInitRequestStart,isFreestarDataCollectorInitialized:!1}),async function(e){let t=Fe({key:ss});if(t&&(t=JSON.parse(t),t.timestamp&&(Date.now()-t.timestamp)/1e3/60>=180&&(t=null)),("PROD"!==os().env||"PROD"===os().env&&t&&t.altconfig)&&(t=!1),!t){const i=await fetch(function(){const e=os();let t=d.replace("ENV",e.env);"TEST"===e.env&&(t+=l.replace("NUMBER",e.version.toString())),"PROD"!==e.env&&(t+=c);const i=Fe({key:h}),n=Fe({key:m});return i&&(t+=u.replace("TEST_ID",i)),n&&(t+=p.replace("VARIANT_ID",n)),t}(),{credentials:"include"});if(!i.ok){const t=`No data returned from initURL fetching fsdata endpoint: ${i.status}`;e({error:t})}t=await i.json(),t.timestamp=Date.now(),"TEST"!==os().env||t.altconfig||(t.altconfig=!0);const n=JSON.stringify(t);freestar.queue.push((function(){Ve({key:ss,value:n})}))}if(freestar.msg.que=freestar.msg.que||[],t&&0===Object.keys(t).length)return window.freestar.msg.que.push({eventType:"customEvent",args:{eventName:"INIT_ENDPOINT_FAILED",eventType:"EMPTY_FSDATA",jsonValue:JSON.stringify(window.freestar.fsdata)}}),as({callback:e});if(t){if(Vn().checkForAlternativeInstances({isTest:ds({pubfigSettings:t.pubfigSettings}),performanceLogger:Wi()}),window.freestar.msg.fpc=rs({data:t,dataPath:"fsuid"}),window.freestar.locData=rs({data:t,dataPath:"location"}),window.freestar.networkMap=rs({data:t,dataPath:"networkMap.networks"}),window.freestar.fsdata=rs({data:t,dataPath:"pubfigSettings.fsdata"}),!window.freestar.fsdata.templateVersionId){const e=rs({data:t,dataPath:"pubfigSettings.templateVersionId"});window.freestar.fsdata.templateVersionId=e}window.freestar.adRefreshTurboConfig=rs({data:t,dataPath:"adRefresh"}),ns(window.freestar.fsdata,window.freestar.adRefreshTurboConfig),window.freestar.fsdata&&0===Object.keys(window.freestar.fsdata).length&&(window.freestar.msg.que.push({eventType:"customEvent",args:{eventName:"INIT_ENDPOINT_FAILED",eventType:"EMPTY_FSDATA",jsonValue:JSON.stringify(window.freestar.fsdata)}}),as({callback:e}));const i=window.freestar?.fsdata?.isTriple13Enabled;Ye().fetch({fetchFn:ut,requestId:"getIdealData",onError:()=>{i&&Ye().fetch({requestId:"getFloorsData",fetchFn:()=>wt(window.freestar.deviceInfo.device.vendor,window.freestar.deviceInfo.device.type,0)})},onSuccess:({data:e})=>{i&&(e&&e.floors&&!e.floors.error&&e.floors.length>0||Ye().fetch({requestId:"getFloorsData",fetchFn:()=>wt(window.freestar.deviceInfo.device.vendor,window.freestar.deviceInfo.device.type,0)}))}}).then((()=>{e(null,{})}))}else e({error:"Empty fsdata returned from get call"})}(((t,i)=>{if(Wi().logMark({markerName:y.pubfigInitRequestEnd,compareTo:[y.pubfigInitRequestStart]}),Mn(window.freestar.fsdata.cmpType,window.freestar.locData),T({}),Gn(),Ss(),ps(),freestar.fsdata.footerBiddingEnabled&&!M({name:"footerBidding"})){let{psoDisableInteraction:t=!1}=freestar.fsdata;(!Se()||Se()&&t)&&(e?Xn():window.addEventListener("load",Xn)),Se()&&!t&&ke({name:"engine",callback:Xn})}else Xn();freestar.modulesLoaded.pubfig=!0}))}}();
